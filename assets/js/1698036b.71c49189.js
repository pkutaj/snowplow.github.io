"use strict";(self.webpackChunkdocsite_poc_github_io=self.webpackChunkdocsite_poc_github_io||[]).push([[98514],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>w});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=o.createContext({}),u=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),w=i,y=d["".concat(s,".").concat(w)]||d[w]||p[w]||r;return n?o.createElement(y,a(a({ref:t},c),{},{components:n})):o.createElement(y,a({ref:t},c))}));function w(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var u=2;u<r;u++)a[u]=n[u];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},77413:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>u});var o=n(87462),i=(n(67294),n(3905));const r={title:"Tutorial: Anonymous tracking",date:"2021-01-04",sidebar_position:50},a=void 0,l={unversionedId:"try-snowplow/recipes/recipe-anonymous-tracking/index",id:"try-snowplow/recipes/recipe-anonymous-tracking/index",title:"Tutorial: Anonymous tracking",description:"Introduction",source:"@site/docs/try-snowplow/recipes/recipe-anonymous-tracking/index.md",sourceDirName:"try-snowplow/recipes/recipe-anonymous-tracking",slug:"/try-snowplow/recipes/recipe-anonymous-tracking/",permalink:"/docs/try-snowplow/recipes/recipe-anonymous-tracking/",draft:!1,editUrl:"https://github.com/snowplow/snowplow.github.io/tree/main/docs/try-snowplow/recipes/recipe-anonymous-tracking/index.md",tags:[],version:"current",lastUpdatedAt:1661771342,formattedLastUpdatedAt:"Aug 29, 2022",sidebarPosition:50,frontMatter:{title:"Tutorial: Anonymous tracking",date:"2021-01-04",sidebar_position:50},sidebar:"tutorialSidebar",previous:{title:"Tutorial: E-commerce analytics",permalink:"/docs/try-snowplow/recipes/recipe-ecommerce-analytics/"},next:{title:"Tutorial: Single customer view",permalink:"/docs/try-snowplow/recipes/recipe-single-customer-view/"}},s={},u=[{value:"What you&#39;ll be doing",id:"what-youll-be-doing",level:2},{value:"Toggling on fully anonymous data collection",id:"toggling-on-fully-anonymous-data-collection",level:4},{value:"Verifying no PII is sent with events",id:"verifying-no-pii-is-sent-with-events",level:4},{value:"Let&#39;s break down what you&#39;ve done",id:"lets-break-down-what-youve-done",level:2},{value:"What you might want to do next",id:"what-you-might-want-to-do-next",level:2}],c={toc:u};function p(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:""}),(0,i.kt)("p",null,"Introduction"),(0,i.kt)("p",null,"Unlike most other analytics solutions, Snowplow runs in your own cloud account, giving you full ownership and control over how and what you track. This is particularly important with respect to user identification and increased user privacy regulation. An overview of user identification with Snowplow can be found ",(0,i.kt)("a",{parentName:"p",href:"https://snowplowanalytics.com/blog/2020/06/11/single-customer-view/"},"in this blog post"),"."),(0,i.kt)("p",null,"By default, Snowplow captures identifiers with all events that can be considered PII - user and session cookie IDs as well as the IP address. However, Snowplow also allows you to track data without these identifiers. This recipe explains how you can capture Snowplow web events without:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"setting any cookies"),(0,i.kt)("li",{parentName:"ul"},"capturing any user or session IDs"),(0,i.kt)("li",{parentName:"ul"},"capturing the user's IP address")),(0,i.kt)("h2",{id:"what-youll-be-doing"},"What you'll be doing"),(0,i.kt)("p",null,"Snowplow provides two ways for limiting the amount of PII you capture and store:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Not collecting the PII in the first place (this is covered in this recipe)"),(0,i.kt)("li",{parentName:"ul"},"Pseudonymizing the PII during enrichment (on by default in Try Snowplow, but configurable with Snowplow BDP)")),(0,i.kt)("p",null,"You will be updating your JavaScript tracker implementation to stop setting and collecting the following four fields:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"domain_userid")," (client side cookie ID set against the domain the tracking is on)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"domain_sessionid")," (client side session cookie ID)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"network_userid")," (server side cookie ID set against the collector domain)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"user_ipaddress")," (the user\u2019s IP address)")),(0,i.kt)("p",null,"You will then verify that events no longer contain any PII."),(0,i.kt)("h4",{id:"toggling-on-fully-anonymous-data-collection"},"Toggling on fully anonymous data collection"),(0,i.kt)("p",null,"In your JavaScript tracker implementation, you need to add the following into your tracker initialisation:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"anonymousTracking: {withServerAnonymisation: true}\n")),(0,i.kt)("p",null,"Therefore, the entire tracker initialization code will look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'snowplow("newTracker", "try", "<YOUR_COLLECTOR_ENDPOINT>", {\n  appId: "try-snowplow",\n  platform: "web",\n  anonymousTracking: {withServerAnonymisation: true}\n  contexts: {\n    webPage: true,\n    performanceTiming: true\n  }\n});\n')),(0,i.kt)("h4",{id:"verifying-no-pii-is-sent-with-events"},"Verifying no PII is sent with events"),(0,i.kt)("p",null,"Run the following query to verify that no PII is sent with subsequent events:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"SELECT COUNT(*) FROM atomic.events\nWHERE collector_tstamp > '2021-01-01 00:00:00' -- insert the timestamp from when you toggled anonymous tracking on\n  AND domain_userid IS NULL\n  AND domain_sessionid IS NULL\n  AND network_userid IS NULL\n  AND user_ipaddress is NULL;\n")),(0,i.kt)("h2",{id:"lets-break-down-what-youve-done"},"Let's break down what you've done"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You have updated your tracking to no longer capture any PII with your Snowplow events."),(0,i.kt)("li",{parentName:"ul"},"You have verified that Snowplow no longer captures PII with events.")),(0,i.kt)("h2",{id:"what-you-might-want-to-do-next"},"What you might want to do next"),(0,i.kt)("p",null,"You have now fully disabled capturing any PII with Snowplow events. However, Snowplow also allows you do anonymous session tracking: a session hash is stored in the browser for the duration of the session but no persistent user identifiers are set or captured. More information on Snowplow's different anonymous tracking capabilities can be found in the relevant JavaScript tracker release posts (",(0,i.kt)("a",{parentName:"p",href:"https://snowplowanalytics.com/blog/2020/08/20/snowplow-javascript-tracker-2-15-0-released/"},"2.15.0")," and ",(0,i.kt)("a",{parentName:"p",href:"https://snowplowanalytics.com/blog/2020/12/15/snowplow-javascript-tracker-2-17-0-released/"},"2.17.0"),")."),(0,i.kt)("p",null,"An overall overview of Snowplow's approach to user identification and user privacy can be found in ",(0,i.kt)("a",{parentName:"p",href:"https://snowplowanalytics.com/blog/2020/09/06/user-identification-and-privacy/"},"this blog post"),"."))}p.isMDXComponent=!0}}]);