"use strict";(self.webpackChunkdocsite_poc_github_io=self.webpackChunkdocsite_poc_github_io||[]).push([[84452],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>c});var n=o(67294);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||(a[o]=e[o]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var s=n.createContext({}),d=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var o=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),m=d(o),c=a,b=m["".concat(s,".").concat(c)]||m[c]||u[c]||l;return o?n.createElement(b,i(i({ref:t},p),{},{components:o})):n.createElement(b,i({ref:t},p))}));function c(e,t){var o=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=o.length,i=new Array(l);i[0]=m;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r.mdxType="string"==typeof e?e:a,i[1]=r;for(var d=2;d<l;d++)i[d]=o[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}m.displayName="MDXCreateElement"},62717:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>d});var n=o(87462),a=(o(67294),o(3905));const l={title:"dbt: Mobile data model",date:"2022-05-14",sidebar_position:2e3},i=void 0,r={unversionedId:"modeling-your-data/the-snowplow-mobile-data-model/dbt-mobile-data-model/index",id:"modeling-your-data/the-snowplow-mobile-data-model/dbt-mobile-data-model/index",title:"dbt: Mobile data model",description:"The snowplow-mobile dbt package provides a means to run the standard mobile model via dbt. It processes events incrementally and is designed in a modular manner, allowing you to easily integrate your own custom SQL into the incremental framework provided by the package.",source:"@site/docs/modeling-your-data/the-snowplow-mobile-data-model/dbt-mobile-data-model/index.md",sourceDirName:"modeling-your-data/the-snowplow-mobile-data-model/dbt-mobile-data-model",slug:"/modeling-your-data/the-snowplow-mobile-data-model/dbt-mobile-data-model/",permalink:"/docs/modeling-your-data/the-snowplow-mobile-data-model/dbt-mobile-data-model/",draft:!1,editUrl:"https://github.com/snowplow/snowplow.github.io/tree/main/docs/modeling-your-data/the-snowplow-mobile-data-model/dbt-mobile-data-model/index.md",tags:[],version:"current",lastUpdatedAt:1661526903,formattedLastUpdatedAt:"Aug 26, 2022",sidebarPosition:2e3,frontMatter:{title:"dbt: Mobile data model",date:"2022-05-14",sidebar_position:2e3},sidebar:"tutorialSidebar",previous:{title:"sql-runner: Mobile data model",permalink:"/docs/modeling-your-data/the-snowplow-mobile-data-model/sql-runner-mobile-data-model/"},next:{title:"Setup and run SQL Runner",permalink:"/docs/modeling-your-data/setup-and-run-sql-runner/"}},s={},d=[{value:"Quickstart",id:"quickstart",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Prerequisities",id:"prerequisities",level:3},{value:"Supported Warehouses",id:"supported-warehouses",level:3},{value:"Installing the package",id:"installing-the-package",level:3},{value:"Essential Configuration",id:"essential-configuration",level:3},{value:"1 - Check source data",id:"1---check-source-data",level:4},{value:"2 - Enable desired contexts",id:"2---enable-desired-contexts",level:4},{value:"3 - Enable optional modules",id:"3---enable-optional-modules",level:4},{value:"4 - Filter your data set",id:"4---filter-your-data-set",level:4},{value:"Further configuration",id:"further-configuration",level:3},{value:"Operation",id:"operation",level:3},{value:"Testing",id:"testing",level:3},{value:"Customising the mobile model",id:"customising-the-mobile-model",level:2}],p={toc:d};function u(e){let{components:t,...o}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The snowplow-mobile dbt package provides a means to run the standard mobile model via dbt. It processes events incrementally and is designed in a modular manner, allowing you to easily integrate your own custom SQL into the incremental framework provided by the package."),(0,a.kt)("p",null,"The package can be found in the\xa0",(0,a.kt)("a",{parentName:"p",href:"https://github.com/snowplow/dbt-snowplow-mobile"},"snowplow/dbt-snowplow-mobile repo"),", with the full doc site hosted\xa0",(0,a.kt)("a",{parentName:"p",href:"https://snowplow.github.io/dbt-snowplow-mobile/#!/overview/snowplow_mobile"},"here"),"."),(0,a.kt)("h2",{id:"quickstart"},"Quickstart"),(0,a.kt)("h3",{id:"requirements"},"Requirements"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Snowplow\xa0",(0,a.kt)("a",{parentName:"li",href:"/docs/collecting-data/collecting-from-own-applications/mobile-trackers/previous-versions/android-tracker/"},"Android"),"\xa0or\xa0",(0,a.kt)("a",{parentName:"li",href:"/docs/collecting-data/collecting-from-own-applications/mobile-trackers/previous-versions/objective-c-tracker/"},"iOS"),"\xa0mobile tracker version 1.1.0 or later implemented."),(0,a.kt)("li",{parentName:"ul"},"Mobile session context enabled."),(0,a.kt)("li",{parentName:"ul"},"Screen view events enabled.")),(0,a.kt)("h3",{id:"prerequisities"},"Prerequisities"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/dbt-labs/dbt"},"dbt"),"\xa0must be installed."),(0,a.kt)("li",{parentName:"ul"},"A dataset of mobile events from the mobile trackers must be available in the database.")),(0,a.kt)("h3",{id:"supported-warehouses"},"Supported Warehouses"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Redshift, Snowflake, BigQuery, and PostgreSQL")),(0,a.kt)("h3",{id:"installing-the-package"},"Installing the package"),(0,a.kt)("p",null,"Add the snowplow-mobile package to your\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"packages.yml"),"\xa0file. For more information, refer to dbt's\xa0",(0,a.kt)("a",{parentName:"p",href:"https://hub.getdbt.com/snowplow/snowplow_mobile/latest/"},"package hub"),"."),(0,a.kt)("h3",{id:"essential-configuration"},"Essential Configuration"),(0,a.kt)("h4",{id:"1---check-source-data"},"1 - Check source data"),(0,a.kt)("p",null,"This package will by default assume your Snowplow events data is contained in the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"atomic"),"\xa0schema of your\xa0",(0,a.kt)("a",{parentName:"p",href:"https://docs.getdbt.com/docs/running-a-dbt-project/using-the-command-line-interface/configure-your-profile"},"target.database"),". In order to change this, please add the following to your\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"dbt_project.yml"),"\xa0file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# dbt_project.yml\n...\nvars:\n    snowplow_mobile:\n        snowplow__atomic_schema: schema_with_snowplow_events\n        snowplow__database: database_with_snowplow_events\n")),(0,a.kt)("h4",{id:"2---enable-desired-contexts"},"2 - Enable desired contexts"),(0,a.kt)("p",null,"The mobile package has the option to join in data from the following 4 Snowplow contexts:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Mobile context -- Device type, OS, etc."),(0,a.kt)("li",{parentName:"ul"},"Geolocation context -- Device latitude, longitude, bearing, etc."),(0,a.kt)("li",{parentName:"ul"},"Application context -- App version and build"),(0,a.kt)("li",{parentName:"ul"},"Screen context -- Screen details associated with mobile event")),(0,a.kt)("p",null,"By default, these are\xa0",(0,a.kt)("strong",{parentName:"p"},"all disabled"),"\xa0in the mobile package. Assuming you have the contexts turned on in your Snowplow pipeline, to enable the contexts within the package please add the following to your\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"dbt_project.yml"),"\xa0file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# dbt_project.yml\n...\nvars:\n    snowplow__enable_mobile_context: true\n    snowplow__enable_geolocation_context: true\n    snowplow__enable_application_context: true\n    snowplow__enable_screen_context: true\n")),(0,a.kt)("h4",{id:"3---enable-optional-modules"},"3 - Enable optional modules"),(0,a.kt)("p",null,"The mobile package also has the option to join in data from the following 1 Snowplow module:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"App Errors module -- Details relating to app errors that occur during sessions")),(0,a.kt)("p",null,"By default this module is\xa0",(0,a.kt)("strong",{parentName:"p"},"disabled"),"\xa0in the mobile package. Assuming you have the module turned on in your Snowplow pipeline, to enable the module within the package please add the following to your\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"dbt_project.yml"),"\xa0file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# dbt_project.yml\n...\nvars:\n    snowplow_mobile:\n        snowplow__enable_app_errors_module: true\n")),(0,a.kt)("h4",{id:"4---filter-your-data-set"},"4 - Filter your data set"),(0,a.kt)("p",null,"You can specify both the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"start_date"),"\xa0at which to start processing events and the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"app_id"),"'s to filter for. By default, the\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"start_date"),"\xa0is set to\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"2020-01-01"),"\xa0and all\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"app_id"),"'s are selected. To change this, please add the following to your\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"dbt_project.yml"),"\xa0file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# dbt_project.yml\n...\nvars:\n    snowplow_mobile:\n        snowplow__start_date: 'yyyy-mm-dd'\n        snowplow__app_id: ['mobile_app_1', 'mobile_app_2']\n")),(0,a.kt)("h3",{id:"further-configuration"},"Further configuration"),(0,a.kt)("p",null,"There are many additional configurations you can make to the model such as changing destination schemas, disabling modules, etc."),(0,a.kt)("p",null,"For more details, please refer to the\xa0",(0,a.kt)("a",{parentName:"p",href:"https://snowplow.github.io/dbt-snowplow-mobile/#!/overview/snowplow_mobile"},"snowplow-mobile package documentation"),"."),(0,a.kt)("h3",{id:"operation"},"Operation"),(0,a.kt)("p",null,"The Snowplow mobile model is designed to be run as a whole, which ensures all incremental tables are kept in sync. As such, we suggest running the model using:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"dbt run --models snowplow_mobile tag:snowplow_mobile_incremental\n")),(0,a.kt)("p",null,"We strongly advise reading the operation section on the\xa0",(0,a.kt)("a",{parentName:"p",href:"https://snowplow.github.io/dbt-snowplow-mobile/#!/overview/snowplow_mobile"},"full doc site"),"\xa0for more information on operations such as full-refreshes of the mobile model and backfilling data, since operations such as full refreshes deviate slightly from the native dbt implementation."),(0,a.kt)("h3",{id:"testing"},"Testing"),(0,a.kt)("p",null,"A full suite of tests are included within the package to ensure data quality. For more information on these and suggested implementations when running in orchestration, please refer to the\xa0",(0,a.kt)("a",{parentName:"p",href:"https://snowplow.github.io/dbt-snowplow-mobile/#!/overview/snowplow_mobile"},"doc site"),"."),(0,a.kt)("h2",{id:"customising-the-mobile-model"},"Customising the mobile model"),(0,a.kt)("p",null,"The package is designed in a modular manner, allowing you to easily add in your own custom SQL as well as incorporate data from events outside of just screen views. For more information on customising the model, please refer to the\xa0",(0,a.kt)("a",{parentName:"p",href:"https://snowplow.github.io/dbt-snowplow-mobile/#!/overview/snowplow_mobile"},"full doc site"),". A dummy example of a dbt project with customisations applied can also be found in the\xa0",(0,a.kt)("a",{parentName:"p",href:"https://github.com/snowplow/dbt-snowplow-mobile/tree/main/custom_example"},"package repo"),"."))}u.isMDXComponent=!0}}]);