<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-understanding-tracking-design/managing-data-structures-via-the-api-2/index">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159566509-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-M24XMJD"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-M24XMJD",{anonymize_ip:!0})</script><title data-rh="true">Managing data structures via the API | Snowplow Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.snowplowanalytics.com/docs/understanding-tracking-design/managing-data-structures-via-the-api-2"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Managing data structures via the API | Snowplow Documentation"><meta data-rh="true" name="description" content="As well as managing data structures through the Snowplow BDP Console, Snowplow BDP customers can also manage them programmatically through the data structures API."><meta data-rh="true" property="og:description" content="As well as managing data structures through the Snowplow BDP Console, Snowplow BDP customers can also manage them programmatically through the data structures API."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.snowplowanalytics.com/docs/understanding-tracking-design/managing-data-structures-via-the-api-2"><link data-rh="true" rel="alternate" href="https://docs.snowplowanalytics.com/docs/understanding-tracking-design/managing-data-structures-via-the-api-2" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.snowplowanalytics.com/docs/understanding-tracking-design/managing-data-structures-via-the-api-2" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a6feea07.css">
<link rel="preload" href="/assets/js/runtime~main.9e6ea025.js" as="script">
<link rel="preload" href="/assets/js/main.957d7bc5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/snowplow-logo.svg" alt="Snowplow Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/snowplow-logo.svg" alt="Snowplow Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link nav-link__first customized_AOMy navbar__link--active" href="/docs">Docs</a><a href="https://discourse.snowplowanalytics.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link undefined customized_AOMy">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/snowplow/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link undefined customized_AOMy">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://try.snowplowanalytics.com/?utm_content=hero-cta&amp;utm_campaign=snowplow-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link snwpl-nav-button customized_AOMy">Try Snowplow</a><a href="https://go.snowplowanalytics.com/l/571483/2021-02-19/3sn5nml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link snwpl-nav-button customized_AOMy">Book a demo</a><div class="toggle_vylO extraSpace_k8HL"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG extraPadding_YQbj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started-with-snowplow-bdp">Getting started on Snowplow BDP</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow BDP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started-on-snowplow-open-source">Getting started on Snowplow Open Source</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow Open Source&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/try-snowplow">Try Snowplow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Try Snowplow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/open-source-quick-start">Snowplow Open Source Quick Start</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Open Source Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/understanding-your-pipeline">Understanding your pipeline</a><button aria-label="Toggle the collapsible sidebar category &#x27;Understanding your pipeline&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/understanding-tracking-design">Designing tracking</a><button aria-label="Toggle the collapsible sidebar category &#x27;Designing tracking&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/understanding-tracking-design/introduction-to-tracking-design">Introduction to tracking design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/understanding-tracking-design/understanding-schemas-and-validation">Structuring your data with schemas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/understanding-tracking-design/understanding-events-entities">Understanding events and entities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/understanding-tracking-design/out-of-the-box-vs-custom-events-and-entities">Out-of-the-box vs custom events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/understanding-tracking-design/predefined-vs-custom-entities">Predefined vs custom entities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/understanding-tracking-design/managing-data-structures-via-the-api-2">Managing data structures via the API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/understanding-tracking-design/managing-data-structures">Managing data structures in the console</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/understanding-tracking-design/versioning-your-data-structures">Versioning your data structures</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/collecting-data">Collecting data with Trackers and Webhooks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Collecting data with Trackers and Webhooks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/enriching-your-data">Enriching your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Enriching your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/modeling-your-data">Modeling your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Modeling your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/forwarding-events-to-destinations">Forwarding events to Destinations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Forwarding events to Destinations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/managing-data-quality">Managing data quality</a><button aria-label="Toggle the collapsible sidebar category &#x27;Managing data quality&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/using-the-snowplow-console">Snowplow Console</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Console&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/pipeline-components-and-applications">Pipeline Components and Applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pipeline Components and Applications&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/contributing">Community &amp; contributing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community &amp; contributing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/understanding-tracking-design"><span itemprop="name">Designing tracking</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Managing data structures via the API</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Managing data structures via the API</h1></header><p>As well as managing data structures through the Snowplow BDP Console, Snowplow BDP customers can also manage them programmatically through the data structures API.</p><p>This functionality is key to automating any existing process you may have, including workflows in version control systems like GitHub.</p><p>Partnered with other tools like our <a href="/docs/managing-data-quality/testing-and-qa-workflows/using-the-data-structures-ci-tool-for-data-quality">CI tool</a> and / or <a href="/docs/managing-data-quality/testing-and-qa-workflows/set-up-automated-testing-with-snowplow-micro">Snowplow Micro</a>, it&#x27;s possible to have a very robust and automated data structure workflow that ensures data quality upstream of data hitting your pipeline.</p><p>Note</p><p>Data structures interfaces are only compatible with pipelines that have been upgraded to use Iglu Server registries, rather than static S3 registries. Please check <a href="https://console.snowplowanalytics.com/data-structures/" target="_blank" rel="noopener noreferrer">here</a> in the console, to see if you need an upgrade or if your registries are ready to go.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting started<a class="hash-link" href="#getting-started" title="Direct link to heading">​</a></h2><p>You can have a look at and interact with all available endpoints in the <a href="https://console.snowplowanalytics.com/api/msc/v1/docs" target="_blank" rel="noopener noreferrer">API documentation</a>.</p><p>Authorizing in the API documentation</p><p>To be able to post sample requests in the documentation you need to click the <code>Authorize</code> button at the top of the document and authorize with your token. The value for the token field in each individual requests is overwritten by this authorization.</p><p>The endpoints focus on the main operations in the workflow around:</p><ol><li>Retrieving existing data structures and their associated schemas</li><li>Creating or editing new or existing data structures</li><li>Validating a data structure</li><li>Deploying a data structure to a registry</li></ol><p>Each request will need to include your company&#x27;s <code>organizationID</code> which is a UUID that can be retrieved from the URL immediately following the .com when visiting console:</p><p><img loading="lazy" src="/assets/images/orgID-abcb03ac4037410de585e7079489d91c.png" width="727" height="57" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="obtaining-an-api-key">Obtaining an API key<a class="hash-link" href="#obtaining-an-api-key" title="Direct link to heading">​</a></h2><p><a href="https://console.snowplowanalytics.com/credentials" target="_blank" rel="noopener noreferrer">Create a new api key for your organization in console</a>.</p><p>Use the generated api key to obtain an authorization token.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --header &#x27;X-API-Key: $API_KEY&#x27; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  https://console.snowplowanalytics.com/api/msc/v1/organizations/$ORGANIZATION_ID/credentials/v2/token</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This command will return an access token wrapped in json.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{&quot;accessToken&quot;:&quot;&lt;access token value&gt;&quot;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may then use this access token value to supply authorization headers for subsequent api requests.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --header &#x27;authorization: Bearer $ACCESS_TOKEN_VALUE&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="retrieving-data-structures">Retrieving data structures<a class="hash-link" href="#retrieving-data-structures" title="Direct link to heading">​</a></h2><p>The following <code>GET</code> requests allow you to retrieve data structures from both your development and production environment registries.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieve-a-list-of-all-data-structures">Retrieve a list of all data structures<a class="hash-link" href="#retrieve-a-list-of-all-data-structures" title="Direct link to heading">​</a></h3><p>Use this request to:</p><ul><li>Retrieve a list of all data structures</li><li>Retrieve a list of data structures filtered by <code>vendor</code> or <code>name</code> query parameters</li></ul><p><code>**GET** ​/api​/msc​/v1​/organizations​/{organizationId}​/data-structures/v1</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieve-a-specific-data-structure">Retrieve a specific data structure<a class="hash-link" href="#retrieve-a-specific-data-structure" title="Direct link to heading">​</a></h3><p>Use this request to retrieve a specific data structure by its hash (see &#x27;Generating a data structure hash&#x27; below), which is generated on creation.</p><p><code>**GET** ​/api​/msc​/v1​/organizations​/{organizationId}​/data-structures​/v1/{dataStructureHash}</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieve-specific-version-of-a-specific-data-structure">Retrieve specific version of a specific data structure<a class="hash-link" href="#retrieve-specific-version-of-a-specific-data-structure" title="Direct link to heading">​</a></h3><p>Use this request to retrieve all versions of a specific data structure by its hash (see &#x27;Generating a data structure hash&#x27; below)</p><p><code>**GET** ​/api​/msc​/v1​/organizations​/{organizationId}​/data-structures/v1/{dataStructureHash}​/versions​/{versionNumber}</code></p><p>See the <a href="https://console.snowplowanalytics.com/api/msc/v1/docs" target="_blank" rel="noopener noreferrer">detailed API documentation</a> for all options.</p><p>Generating a data structure hash</p><p>To use the commands to retrieve information about a specific Data Structure, you need to encode its identifying parameters (<code>organization ID</code>, <code>vendor</code>, <code>name</code> and <code>format</code>) and hash it with SHA-256.</p><p><strong>Example:</strong><br>
<code>organization ID: _38e97db9-f3cb-404d-8250-cd227506e544_</code><br>
<code>vendor_: com.acme.event_</code><br>
<code>schema name: _search_</code><br>
<code>format: _jsonschema_</code> </p><p>First concatenate the information with a dash (-) as the separator:<br>
<code>_38e97db9-f3cb-404d-8250-cd227506e544_-_com.acme.event_-_search_-jsonschema</code></p><p>And then hash them with SHA-256 to receive: <code>a41ef92847476c1caaf5342c893b51089a596d8ecd28a54d3f22d922422a6700</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="validation">Validation<a class="hash-link" href="#validation" title="Direct link to heading">​</a></h2><p>To validate that your schema is in proper JSON format and complies with warehouse loading requirements, you can use the validation <code>POST</code> requests.</p><p><code>**POST** ​/api​/msc​/v1​/organizations​/{organizationId}​/data-structures/v1/validation-requests</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a class="hash-link" href="#example" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl &#x27;https://console.snowplowanalytics.com/api/msc/v1/organizations/cad39ca5-3e1e-4e88-91af-87d977a4acd8/data-structures/v1/validation-requests&#x27; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -H &#x27;authorization: Bearer YOUR_TOKEN&#x27; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -H &#x27;content-type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --data-binary &#x27;{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;meta&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;hidden&quot;: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;schemaType&quot;: &quot;event&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;customData&quot;: {}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;description&quot;: &quot;Schema for an example event&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;example_field_1&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;type&quot;: &quot;string&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;description&quot;: &quot;the example_field_1 means x&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;maxLength&quot;: 128</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;additionalProperties&quot;: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;type&quot;: &quot;object&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;required&quot;: [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;example_field_1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;$schema&quot;: &quot;http://iglucentral.com/schemas/com.snowplowanalytics.self-desc/schema/jsonschema/1-0-0#&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;self&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;vendor&quot;: &quot;com.acme&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;name&quot;: &quot;example_schema_name&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;format&quot;: &quot;jsonschema&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;version&quot;: &quot;1-0-0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Please note:</p><ul><li>the request&#x27;s body has two parts:<ul><li>one for data structure metadata as value to the <code>meta</code> key</li><li>one for the schema itself as value to the <code>data</code> key</li></ul></li><li>this example uses the synchronous version of validation that responds with the result immediately. There is also an asynchronous version available that returns a request ID that you can later poll to get the result.</li><li>you can add metadata specific to your organisation to the schema as key/value pairs in the <code>customData</code> object. See &#x27;<a href="#managing-meta-data">Managing Meta Data</a>&#x27; for more information.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployments">Deployments<a class="hash-link" href="#deployments" title="Direct link to heading">​</a></h2><p>The deployment endpoints deal with getting a new or edited version of your data structure into your development and production environments.</p><p><code>**GET** ​/api​/msc​/v1​/organizations​/{organizationId}​/data-structures/v1/{dataStructureHash}​/deployments</code></p><p><code>**POST** ​/api​/msc​/v1​/organizations​/{organizationId}​/data-structures/v1/deployment-requests</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-1">Example<a class="hash-link" href="#example-1" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">curl &#x27;https://console.snowplowanalytics.com/api/msc/v1/organizations/cad39ca5-3e1e-4e88-91af-87d977a4acd8/data-structures/v1/deployment-requests&#x27; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -H &#x27;authorization: Bearer MY_TOKEN&#x27; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -H &#x27;content-type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --data-binary &#x27;{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;message&quot;: &quot;&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;source&quot;: &quot;VALIDATED&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;target&quot;: &quot;DEV&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;vendor&quot;: &quot;com.acme&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;name&quot;: &quot;example_schema_name&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;format&quot;: &quot;jsonschema&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;version&quot;: &quot;1-0-0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Please note:</p><ul><li>This example shows an example of deploying from <code>VALIDATED</code> to <code>DEV</code>. The method is the same for Production, but you would change the variables where <code>&quot;source&quot;: &quot;DEV&quot;</code> and <code>&quot;target&quot;: &quot;PROD&quot;</code></li><li>The API enforces a workflow of validating, testing on development and then deploying to production. To achieve this you deploy from one environment to another; from (virtual environment) <code>VALIDATED</code> to <code>DEV</code>, then <code>DEV</code> to <code>PROD</code>.</li><li>Only users designated as &quot;admin&quot; in the console have the permissions to promote from <code>DEV</code> to <code>PROD</code>.</li><li>There is a sync option that will return the response of the deployment request directly. Otherwise you can poll for deployment responses using the deployment ID.</li><li>The property for <code>message</code> can be sent with a deployment which will capture any change log notes that will be stored against the deployment. This feature is only available to Enterprise tier accounts in the console.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="managing-meta-data">Managing meta data<a class="hash-link" href="#managing-meta-data" title="Direct link to heading">​</a></h2><p>Meta data is used to add additional information to a Data Structure.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;meta&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;hidden&quot;: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;schemaType&quot;: &quot;event&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;customData&quot;: {}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>hidden</code> property sets the data structure as visible (true) or not (false) in the console.</p><p>The <code>schemaType</code> property can be set as null | &quot;event&quot; | &quot;entity&quot;.</p><p>The <code>customData</code> property is mapped as <code>[string, string]</code> and can be used to send across any key/value pairs you&#x27;d like to associate with the schema.</p><p>For example if you wanted to specify departmental ownership through meta data:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;customData&quot;: { &quot;department&quot;: &quot;marketing&quot; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can update the meta data for a data structure using the PUT endpoint:</p><p><code>**PUT** ​/api​/msc​/v1​/organizations​/{organizationId}​/data-structures/v1/{dataStructureHash}​/meta</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrating-from-the-legacy-api">Migrating from the legacy API<a class="hash-link" href="#migrating-from-the-legacy-api" title="Direct link to heading">​</a></h2><p>The API described above supersedes the legacy one, which was to be found under <code>/api/schemas</code>. It offers under-the-hood improvements and a clear path forward to adding further value. To make the transition easier, we have kept the same models for the data being exchanged; it is therefore simply a matter of 1) <a href="#obtaining-an-api-key">updating the authentication method</a>, and 2) switching to the new endpoints listed above.</p><p>The legacy API is currently tunneled to the new one, so there is no data differences to be expected after the upgrade. We will maintain this facade while supporting customers in upgrading. Your Customer Success Manager and our Engineers will be glad to assist you during this transition.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/snowplow/snowplow.github.io/tree/main/docs/understanding-tracking-design/managing-data-structures-via-the-api-2/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-08-25T10:52:08.000Z">Aug 25, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/understanding-tracking-design/predefined-vs-custom-entities"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Predefined vs custom entities</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/understanding-tracking-design/managing-data-structures"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Managing data structures in the console</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting started</a></li><li><a href="#retrieving-data-structures" class="table-of-contents__link toc-highlight">Retrieving data structures</a><ul><li><a href="#retrieve-a-list-of-all-data-structures" class="table-of-contents__link toc-highlight">Retrieve a list of all data structures</a></li><li><a href="#retrieve-a-specific-data-structure" class="table-of-contents__link toc-highlight">Retrieve a specific data structure</a></li><li><a href="#retrieve-specific-version-of-a-specific-data-structure" class="table-of-contents__link toc-highlight">Retrieve specific version of a specific data structure</a></li></ul></li><li><a href="#validation" class="table-of-contents__link toc-highlight">Validation</a><ul><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#deployments" class="table-of-contents__link toc-highlight">Deployments</a><ul><li><a href="#example-1" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#managing-meta-data" class="table-of-contents__link toc-highlight">Managing meta data</a></li><li><a href="#migrating-from-the-legacy-api" class="table-of-contents__link toc-highlight">Migrating from the legacy API</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Snowplow Analytics Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9e6ea025.js"></script>
<script src="/assets/js/main.957d7bc5.js"></script>
</body>
</html>