<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner/common-configuration/index">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159566509-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-M24XMJD"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-M24XMJD",{anonymize_ip:!0})</script><title data-rh="true">Common configuration | Snowplow Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.snowplowanalytics.com/docs/pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner/common-configuration"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Common configuration | Snowplow Documentation"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.snowplowanalytics.com/docs/pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner/common-configuration"><link data-rh="true" rel="alternate" href="https://docs.snowplowanalytics.com/docs/pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner/common-configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.snowplowanalytics.com/docs/pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner/common-configuration" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.cb54eed0.css">
<link rel="preload" href="/assets/js/runtime~main.fbf54d6f.js" as="script">
<link rel="preload" href="/assets/js/main.82ee80ee.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/snowplow-logo.svg" alt="Snowplow Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/snowplow-logo.svg" alt="Snowplow Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link nav-link__first customized_AOMy navbar__link--active" href="/docs">Docs</a><a href="https://discourse.snowplowanalytics.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link undefined customized_AOMy">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/snowplow/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link undefined customized_AOMy">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://try.snowplowanalytics.com/?utm_content=hero-cta&amp;utm_campaign=snowplow-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link snwpl-nav-button customized_AOMy">Try Snowplow</a><a href="https://go.snowplowanalytics.com/l/571483/2021-02-19/3sn5nml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link snwpl-nav-button customized_AOMy">Book a demo</a><div class="toggle_vylO extraSpace_k8HL"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG extraPadding_YQbj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started-with-snowplow-bdp">Getting started on Snowplow BDP</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow BDP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started-on-snowplow-open-source">Getting started on Snowplow Open Source</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow Open Source&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/try-snowplow">Try Snowplow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Try Snowplow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/open-source-quick-start">Snowplow Open Source Quick Start</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Open Source Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/understanding-your-pipeline">Understanding your pipeline</a><button aria-label="Toggle the collapsible sidebar category &#x27;Understanding your pipeline&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/understanding-tracking-design">Designing tracking</a><button aria-label="Toggle the collapsible sidebar category &#x27;Designing tracking&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/collecting-data">Collecting data with Trackers and Webhooks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Collecting data with Trackers and Webhooks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/enriching-your-data">Enriching your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Enriching your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/modeling-your-data">Modeling your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Modeling your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/forwarding-events-to-destinations">Forwarding events to Destinations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Forwarding events to Destinations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/managing-data-quality">Managing data quality</a><button aria-label="Toggle the collapsible sidebar category &#x27;Managing data quality&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/using-the-snowplow-console">Snowplow Console</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Console&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/pipeline-components-and-applications">Pipeline Components and Applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pipeline Components and Applications&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/version-compatibility-matrix">Version compatibility matrix</a><button aria-label="Toggle the collapsible sidebar category &#x27;Version compatibility matrix&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/stream-collector">Stream Collector</a><button aria-label="Toggle the collapsible sidebar category &#x27;Stream Collector&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/sqs2kinesis">Sqs2kinesis</a><button aria-label="Toggle the collapsible sidebar category &#x27;Sqs2kinesis&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/enrichment-components">Enrichment</a><button aria-label="Toggle the collapsible sidebar category &#x27;Enrichment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets">Loaders and storage targets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Loaders and storage targets&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets/s3-loader">S3 Loader</a><button aria-label="Toggle the collapsible sidebar category &#x27;S3 Loader&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets/snowplow-rdb-loader-3-0-0">RDB Loader</a><button aria-label="Toggle the collapsible sidebar category &#x27;RDB Loader&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets/snowplow-snowflake-loader">Snowflake Loader</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowflake Loader&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets/bigquery-loader">BigQuery Loader</a><button aria-label="Toggle the collapsible sidebar category &#x27;BigQuery Loader&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets/google-cloud-storage-loader">Google Cloud Storage Loader</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets/elasticsearch-loader">Elasticsearch Loader</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets/snowplow-postgres-loader">Postgres Loader</a><button aria-label="Toggle the collapsible sidebar category &#x27;Postgres Loader&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets/events-manifest-populator">Events Manifest Populator</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner">EmrEtlRunner</a><button aria-label="Toggle the collapsible sidebar category &#x27;EmrEtlRunner&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner/common-configuration">Common configuration</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/iglu">Iglu</a><button aria-label="Toggle the collapsible sidebar category &#x27;Iglu&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pipeline-components-and-applications/dataflow-runner">Dataflow Runner</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/snowplow-mini">Snowplow Mini</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Mini&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/piinguin">Piinguin</a><button aria-label="Toggle the collapsible sidebar category &#x27;Piinguin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/pipeline-components-and-applications/right-to-be-forgotten-spark-application">Right to be Forgotten Spark Application</a><button aria-label="Toggle the collapsible sidebar category &#x27;Right to be Forgotten Spark Application&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/contributing">Community &amp; contributing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community &amp; contributing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/pipeline-components-and-applications"><span itemprop="name">Pipeline Components and Applications</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/pipeline-components-and-applications/loaders-storage-targets"><span itemprop="name">Loaders and storage targets</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner"><span itemprop="name">EmrEtlRunner</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Common configuration</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Common configuration</h1></header><h3 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h3><p>This page describes the format for the YAML file which is used to configure the EmrEtlRunner.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-environment-variables">Using environment variables<a class="hash-link" href="#using-environment-variables" title="Direct link to heading">​</a></h3><p>You can use environment variables rather than hardcoding strings in the configuration file. For example, load your AWS access key from an environment variable named &quot;AWS<!-- -->_<!-- -->SNOWPLOW<!-- -->_<!-- -->SECRET<!-- -->_<!-- -->KEY&quot;:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">secret_access_key: &lt;%= ENV[&#x27;AWS_SNOWPLOW_SECRET_KEY&#x27;] %&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-configuration">Example configuration<a class="hash-link" href="#example-configuration" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">aws:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # Credentials can be hardcoded or set in environment variables</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  access_key_id: &lt;%= ENV[&#x27;AWS_SNOWPLOW_ACCESS_KEY&#x27;] %&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  secret_access_key: &lt;%= ENV[&#x27;AWS_SNOWPLOW_SECRET_KEY&#x27;] %&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  s3:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    region: ADD HERE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    buckets:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      assets: s3://snowplow-hosted-assets # DO NOT CHANGE unless you are hosting the jarfiles etc yourself in your own bucket</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      jsonpath_assets: # If you have defined your own JSON Schemas, add the s3:// path to your own JSON Path files in your own bucket here</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      log: ADD HERE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      raw:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        in:                  # Multiple in buckets are permitted</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          - ADD HERE          # e.g. s3://my-in-bucket</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          - ADD HERE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        processing: ADD HERE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        archive: ADD HERE    # e.g. s3://my-archive-bucket/in</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      enriched:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        good: ADD HERE       # e.g. s3://my-out-bucket/enriched/good</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        bad: ADD HERE        # e.g. s3://my-out-bucket/enriched/bad</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        errors: ADD HERE     # Leave blank unless continue_on_unexpected_error: set to true below</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        archive: ADD HERE    # Where to archive enriched events to, e.g. s3://my-archive-bucket/enriched</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      shredded:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        good: ADD HERE       # e.g. s3://my-out-bucket/shredded/good</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        bad: ADD HERE        # e.g. s3://my-out-bucket/shredded/bad</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        errors: ADD HERE     # Leave blank unless continue_on_unexpected_error: set to true below</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        archive: ADD HERE    # Where to archive shredded events to, e.g. s3://my-archive-bucket/shredded</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  emr:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    job_name: Snowplow ETL # Give your job a name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ami_version: 5.9.0      # Don&#x27;t change this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    region: ADD HERE        # Always set this</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    jobflow_role: EMR_EC2_DefaultRole # Created using $ aws emr create-default-roles</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    service_role: EMR_DefaultRole     # Created using $ aws emr create-default-roles</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    placement: ADD HERE     # Set this if not running in VPC. Leave blank otherwise</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ec2_subnet_id: ADD HERE # Set this if running in VPC. Leave blank otherwise</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ec2_key_name: ADD HERE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    bootstrap: []           # Set this to specify custom boostrap actions. Leave empty otherwise</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    software:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      hbase:                # Optional. To launch on cluster, provide version, &quot;0.92.0&quot;, keep quotes. Leave empty otherwise.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      lingual:              # Optional. To launch on cluster, provide version, &quot;1.1&quot;, keep quotes. Leave empty otherwise.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Adjust your Spark cluster below</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    jobflow:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      master_instance_type: m1.medium</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      core_instance_count: 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      core_instance_type: m1.medium</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      core_instance_ebs:    # Optional. Attach an EBS volume to each core instance.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        volume_size: 100    # Gigabytes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        volume_type: &quot;gp2&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        volume_iops: 400    # Optional. Will only be used if volume_type is &quot;io1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ebs_optimized: false # Optional. Will default to true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      task_instance_count: 0 # Increase to use spot instances</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      task_instance_type: m1.medium</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      task_instance_bid: 0.015 # In USD. Adjust bid, or leave blank for non-spot-priced (i.e. on-demand) task instances</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    bootstrap_failure_tries: 3 # Number of times to attempt the job in the event of bootstrap failures</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    additional_info:        # Optional JSON string for selecting additional features</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">collectors:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  format: cloudfront # Or &#x27;clj-tomcat&#x27; for the Clojure Collector, or &#x27;thrift&#x27; for Thrift records, or &#x27;tsv/com.amazon.aws.cloudfront/wd_access_log&#x27; for Cloudfront access logs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">enrich:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  versions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    spark_enrich: 1.10.0 # Version of the Spark Enrichment process</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  continue_on_unexpected_error: false # Set to &#x27;true&#x27; (and set out_errors: above) if you don&#x27;t want any exceptions thrown from ETL</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  output_compression: NONE # Compression only supported with Redshift, set to NONE if you have Postgres targets. Allowed formats: NONE, GZIP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">storage:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  versions:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    rdb_shredder: 0.13.0        # Version of the Relational Database Shredding process</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    rdb_loader: 0.14.0          # Version of the Relational Database Loader app</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hadoop_elasticsearch: 0.1.0 # Version of the Hadoop to Elasticsearch copying process</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">monitoring:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  tags: {} # Name-value pairs describing this job</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  logging:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    level: DEBUG # You can optionally switch to INFO for production</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  snowplow:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    method: get</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    app_id: ADD HERE # e.g. snowplow</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    collector: ADD HERE # e.g. my-collector.cloudfront.net</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aws">aws<a class="hash-link" href="#aws" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="credentials">Credentials<a class="hash-link" href="#credentials" title="Direct link to heading">​</a></h4><p>The <code>access_key_id</code> and <code>secret_access_key</code> variables should be self-explanatory - enter your AWS access key and secret here.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="s3">s3<a class="hash-link" href="#s3" title="Direct link to heading">​</a></h4><p>The <code>region</code> variable should hold the AWS region in which your four data buckets (In Bucket, Processing Bucket etc) are located, e.g. &quot;us-east-1&quot; or &quot;eu-west-1&quot;. Please note that Redshift can only load data from S3 buckets located in the same region as the Redshift instance, and Amazon has not to date launched Redshift in <em>every</em> region. So make sure that if you&#x27;re using Redshift, the bucket specified here is in a region that supports Redshift.</p><p>Within the <code>s3</code> section, the <code>buckets</code> variables are as follows:</p><ul><li><code>assets:</code> holds the ETL job&#x27;s static assets (HiveQL script plus Hive deserializer). You can leave this as-is (pointing to Snowplow Analytics&#x27; <a href="/docs/pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner/Hosted-assets">own public bucket containing these assets</a>) or replace this with your own private bucket containing the assets</li><li><code>log:</code> is the bucket in which Amazon EMR will record processing information for this job run, including logging any errors</li><li><code>raw:</code> is where you specify the paths through which your raw Snowplow events will flow. <code>in</code> is an array of one or more buckets containing raw events. For <code>processing:</code>, <strong>always include a sub-folder on this variable (see below for why)</strong>. <code>archive:</code> is where your raw Snowplow events will be moved after they have been successfully processed by Elastic MapReduce</li><li><code>enriched:</code> is where you specify the paths through which your enriched Snowplow events will flow.</li><li><code>shredded:</code> is where you specify the paths through which your shredded types will flow</li></ul><p>For <code>good:</code>, <strong>always include a sub-folder on this variable (see below for why)</strong>. If you are loading data into Redshift, the <code>good:</code> specified here <strong>must</strong> be located in a region where Amazon has launched Redshift, because Redshift can only bulk load data from S3 that is located in the same region as the Redshift instance, and Redshift has not, to-date, been launched across all Amazon regions</p><p>Each of the bucket variables must start with an S3 protocol - either <code>s3://</code> or <code>s3n://</code>. Each variable can include a sub-folder within the bucket as required, and a trailing slash is optional.</p><p>The <code>bad:</code> entries will store any raw Snowplow log lines which did not pass the enrichment or JSON validation, along with their validation errors. The <code>errors:</code> entries will contain any raw Snowplow log lines which caused an unexpected error, but only if you set continue<!-- -->_<!-- -->on<!-- -->_<!-- -->unexpected<!-- -->_<!-- -->error to true (see below).</p><p><strong>Important 1:</strong> there is a bug in Hive on Amazon EMR where Hive dies if you attempt to read or write data to the root of an S3 bucket. <strong>Therefore always specify a sub-folder (e.g. <code>/events/</code>) for the <code>raw:processing</code>, <code>enriched:good</code> and <code>shredded:good</code> locations.</strong></p><p><strong>Important 2:</strong> do not put your <code>raw:processing</code> inside your <code>raw:in</code> bucket, or your <code>enriched:good</code> inside your <code>raw:processing</code>, or you will create circular references which EmrEtlRunner cannot resolve when moving files.</p><p><strong>Example bucket settings</strong></p><p>Here is an example configuration:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">buckets:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  assets: s3://snowplow-hosted-assets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  log: s3n://my-snowplow-etl/logs/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  raw:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    in: [s3n://my-snowplow-logs/]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    processing: s3n://my-snowplow-etl/processing/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    archive: s3://my-archive-bucket/raw</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  enriched:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    good: s3://my-data-bucket/enriched/good</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    bad: s3://my-data-bucket/enriched/bad</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    errors: s3://my-data-bucket/enriched/errors</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    archive: s3://my-data-bucket/enriched/archive</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  shredded:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    good: s3://my-data-bucket/shredded/good</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    bad: s3://my-data-bucket/shredded/bad</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    errors: s3://my-data-bucket/shredded/errors</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Please note that all buckets must exist prior to running EmrEtlRunner; trailing slashes are optional.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="emr">emr<a class="hash-link" href="#emr" title="Direct link to heading">​</a></h4><p>The EmrEtlRunner makes use of Amazon Elastic Mapreduce (EMR) to process the raw log files and output the cleaned, enriched Snowplow events table.</p><p>This section of the config file is where we configure the operation of EMR. The variables with defaults can typically be left as-is, but you will need to set:</p><ol><li><code>region</code>, which is the Amazon EC2 region in which the job should run, e.g. &quot;us-east-1&quot; or &quot;eu-west-1&quot;</li><li><code>ec2_key_name</code>, which is the name of the Amazon EC2 key that you<br>set up in the <!-- -->[<!-- -->[<!-- -->Dependencies|1-Installing-EmrEtlRunner#dependencies<!-- -->]<!-- -->]<!-- --> above</li></ol><p>Make sure that the EC2 key you specify belongs in the region you specify, or else EMR won&#x27;t be able to find the key. <strong>It&#x27;s strongly recommended that you choose the same Amazon region as your S3 buckets are located in.</strong></p><p>Since 6th April 2015, all new Elastic MapReduce users have been required to use IAM roles with EMR. You can leave the two <code>..._role</code> fields as they are, however you must first create these default EMR roles using the AWS Command Line Interface (<a href="http://docs.aws.amazon.com/cli/latest/userguide/installing.html" target="_blank" rel="noopener noreferrer">installation-instructions</a>), like so:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ aws emr create-default-roles</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Additionally, fill in <strong>one</strong> of these two:</p><ul><li><code>placement</code>, which is the Amazon EC2 region <strong>and</strong> availability zone<br>in which the job should run, e.g. &quot;us-east-1a&quot; or &quot;eu-west-1b&quot;</li><li><code>ec2_subnet_id</code>, which is the ID of the Amazon EC2 subnet you want<br>to run the job in</li></ul><p>You only need to set one of these (they are mutually exclusive settings), but you must set one.</p><p>The <code>software:</code> section lets you start up Lingual and/or HBase when you start up your Elastic MapReduce cluster. This is the configuration to start up both, specifying the versions to start:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">software:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  hbase: &quot;0.92.0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  lingual: &quot;1.1&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="collectors">collectors<a class="hash-link" href="#collectors" title="Direct link to heading">​</a></h3><p>The <code>format</code> field describes the format of the EmrEtlRunner&#x27;s input. The options are:</p><ul><li>&quot;cloudfront&quot; for the Cloudfront Collector</li><li>&quot;clj-tomcat&quot; for the Clojure Collector</li><li>&quot;thrift&quot; for Thrift raw events</li><li>&quot;tsv/com.amazon.aws.cloudfront/wd<!-- -->_<!-- -->access<!-- -->_<!-- -->log&quot; for Cloudfront access logs</li></ul><p>See the <!-- -->[<!-- -->[<!-- -->EmrEtlRunner Input Formats<!-- -->]<!-- -->]<!-- --> page.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="enrich">enrich<a class="hash-link" href="#enrich" title="Direct link to heading">​</a></h3><ul><li><code>spark_enrich</code>: version of the Spark Enrich jar</li><li><code>continue_on_unexpected_error</code>: continue processing even on unexpected row-level errors, e.g. an input file not matching the expected CloudFront format. Off (&quot;false&quot;) by default</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="storage">storage<a class="hash-link" href="#storage" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="versions">versions<a class="hash-link" href="#versions" title="Direct link to heading">​</a></h4><ul><li><code>rdb_shredder</code>: version of the RDB Shredder jar</li><li><code>rdb_loader</code>: version of the RDB Loader jar</li><li><code>hadoop_elasticsearch</code>: version of the Hadoop Elasticsearch Sink</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring">monitoring<a class="hash-link" href="#monitoring" title="Direct link to heading">​</a></h3><p>This section deals with metadata around the EmrEtlRunner and RDB Loader.</p><ul><li><code>tags</code>: a dictionary of name-value pairs describing the job</li><li><code>logging</code>: how verbose/chatty the log output from EmrEtlRunner should be.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="snowplow">snowplow<a class="hash-link" href="#snowplow" title="Direct link to heading">​</a></h4><p>The <code>snowplow</code> section allows the ETL apps to send Snowplow events describing their own progress. To disable this internal tracking, remove the &quot;snowplow&quot; field from the configuration.</p><ul><li><code>method</code>: &quot;get&quot; or &quot;post&quot;</li><li><code>app_id</code>: ID for the pipeline</li><li><code>collector</code>: Endpoint to which events should be sent</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/snowplow/snowplow.github.io/tree/main/docs/pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner/common-configuration/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-08-26T14:03:15.000Z">Aug 26, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/pipeline-components-and-applications/loaders-storage-targets/emr-etl-runner"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">EmrEtlRunner</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/pipeline-components-and-applications/iglu"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Iglu</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#using-environment-variables" class="table-of-contents__link toc-highlight">Using environment variables</a></li><li><a href="#example-configuration" class="table-of-contents__link toc-highlight">Example configuration</a></li><li><a href="#aws" class="table-of-contents__link toc-highlight">aws</a></li><li><a href="#collectors" class="table-of-contents__link toc-highlight">collectors</a></li><li><a href="#enrich" class="table-of-contents__link toc-highlight">enrich</a></li><li><a href="#storage" class="table-of-contents__link toc-highlight">storage</a></li><li><a href="#monitoring" class="table-of-contents__link toc-highlight">monitoring</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/cookie-settings">Change cookie settings</a><span class="footer__link-separator">·</span><a class="footer__link-item" href="/terms-and-conditions">Terms and conditions</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Snowplow Analytics Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fbf54d6f.js"></script>
<script src="/assets/js/main.82ee80ee.js"></script>
</body>
</html>