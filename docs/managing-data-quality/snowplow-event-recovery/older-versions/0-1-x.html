<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-managing-data-quality/snowplow-event-recovery/older-versions/0-1-x/index">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159566509-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-M24XMJD"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-M24XMJD",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Snowplow Documentation" href="/opensearch.xml"><title data-rh="true">0.1.x | Snowplow Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.snowplowanalytics.com/docs/managing-data-quality/snowplow-event-recovery/older-versions/0-1-x"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="0.1.x | Snowplow Documentation"><meta data-rh="true" name="description" content="Recovery Scenarios"><meta data-rh="true" property="og:description" content="Recovery Scenarios"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.snowplowanalytics.com/docs/managing-data-quality/snowplow-event-recovery/older-versions/0-1-x"><link data-rh="true" rel="alternate" href="https://docs.snowplowanalytics.com/docs/managing-data-quality/snowplow-event-recovery/older-versions/0-1-x" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.snowplowanalytics.com/docs/managing-data-quality/snowplow-event-recovery/older-versions/0-1-x" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9HS3C2MKTH-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.6950f247.css">
<link rel="preload" href="/assets/js/runtime~main.c89fe471.js" as="script">
<link rel="preload" href="/assets/js/main.f9862780.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/snowplow-logo.svg" alt="Snowplow Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/snowplow-logo.svg" alt="Snowplow Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link nav-link__first customized_AOMy navbar__link--active" href="/docs">Docs</a><a href="https://discourse.snowplowanalytics.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link undefined customized_AOMy">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/snowplow/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link undefined customized_AOMy">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://try.snowplowanalytics.com/?utm_content=hero-cta&amp;utm_campaign=snowplow-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link snwpl-nav-button customized_AOMy">Try Snowplow</a><a href="https://go.snowplowanalytics.com/l/571483/2021-02-19/3sn5nml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link snwpl-nav-button customized_AOMy">Book a demo</a><div class="toggle_vylO extraSpace_k8HL"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG extraPadding_YQbj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started-with-snowplow-bdp">Getting started on Snowplow BDP</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow BDP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started-on-snowplow-open-source">Getting started on Snowplow Open Source</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow Open Source&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/try-snowplow">Try Snowplow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Try Snowplow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/open-source-quick-start">Snowplow Open Source Quick Start</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Open Source Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/understanding-your-pipeline">Understanding your pipeline</a><button aria-label="Toggle the collapsible sidebar category &#x27;Understanding your pipeline&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/understanding-tracking-design">Designing tracking</a><button aria-label="Toggle the collapsible sidebar category &#x27;Designing tracking&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/collecting-data">Collecting data with Trackers and Webhooks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Collecting data with Trackers and Webhooks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/enriching-your-data">Enriching your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Enriching your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/modeling-your-data">Modeling your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Modeling your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/forwarding-events-to-destinations">Forwarding events to Destinations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Forwarding events to Destinations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/managing-data-quality">Managing data quality</a><button aria-label="Toggle the collapsible sidebar category &#x27;Managing data quality&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/managing-data-quality/testing-and-qa-workflows">Testing and QA workflows</a><button aria-label="Toggle the collapsible sidebar category &#x27;Testing and QA workflows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/managing-data-quality/failed-events">Failed Events</a><button aria-label="Toggle the collapsible sidebar category &#x27;Failed Events&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/managing-data-quality/event-recovery-for-bdp-users">Event Recovery for BDP customers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Event Recovery for BDP customers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery">Event Recovery for Open Source</a><button aria-label="Toggle the collapsible sidebar category &#x27;Event Recovery for Open Source&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery/0-2-concepts">Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery/running">Running</a><button aria-label="Toggle the collapsible sidebar category &#x27;Running&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery/test">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery/extending">Extending</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery/0-2-monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery/migrating-from-0-1-0">Migrating from 0.1.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery/0-2-from-the-trenches-working-with-recovery">Hints &amp; workflows</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery/older-versions">Older versions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Older versions&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/managing-data-quality/snowplow-event-recovery/older-versions/0-1-x">0.1.x</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/using-the-snowplow-console">Snowplow Console</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Console&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/pipeline-components-and-applications">Pipeline Components and Applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pipeline Components and Applications&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/contributing">Community &amp; contributing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community &amp; contributing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/managing-data-quality"><span itemprop="name">Managing data quality</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/managing-data-quality/snowplow-event-recovery"><span itemprop="name">Event Recovery for Open Source</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/managing-data-quality/snowplow-event-recovery/older-versions"><span itemprop="name">Older versions</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">0.1.x</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>0.1.x</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="recovery-scenarios">Recovery Scenarios<a class="hash-link" href="#recovery-scenarios" title="Direct link to heading">​</a></h2><p>The main ideas behind recovery, as presented here, are recovery scenarios. What are recovery scenarios? They are modular and composable processing units that will deal with a specific case you want to recover from.</p><p>As such, recovery scenarios are, at their essence, made of two things:</p><ul><li>an error filter, which will serve as a router between bad rows and the appropriate recovery scenario</li><li>a mutate function, which will “fix” the payload</li></ul><p>For example, if we wanted to recover a set of bad rows consisting of:</p><ul><li>Bad rows that were created due to a missing schema</li><li>Bad rows that were created due to the payload not conforming to its schema</li><li>Bad rows that were created due to an enrichment failing</li></ul><p>We would use a different recovery scenario for each of them, so three in total:</p><ul><li>a first recovery scenario consisting of<ul><li>an error filter checking for missing schema errors</li><li>a mutate function which does nothing (assuming the schema has been added since the bad rows occurred)</li></ul></li><li>a second recovery scenario consisting of<ul><li>an error filter checking for payloads not conforming to their schema errors</li><li>a mutate function which makes the payloads fit their schema</li></ul></li><li>a third recovery scenario consisting of<ul><li>an error filter checking for a particular enrichment failing errors</li><li>a mutate function which does nothing (assuming the enrichment was misconfigured and we just want to rerun it)</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="out-of-the-box-recovery-scenarios">Out of the box recovery scenarios<a class="hash-link" href="#out-of-the-box-recovery-scenarios" title="Direct link to heading">​</a></h3><p>For the most common recovery scenarios, it makes sense to support them out of the box and make them accessible through the recovery job’s configuration which is covered in the next section.</p><table><thead><tr><th>Name</th><th>Mutation</th><th>Example use case</th><th>Parameters</th></tr></thead><tbody><tr><td>Pass through</td><td>Does not mutate the payload in any way</td><td>A missing schema that was added after the fact</td><td><code>error</code></td></tr><tr><td>Replace in query string</td><td>Replaces part of the query string according to a regex</td><td>Misspecified a schema when using the Iglu webhook</td><td><code>error</code>, <code>toReplace</code>, <code>replacement</code></td></tr><tr><td>Remove from query string</td><td>Removes part of the query string according to a regex</td><td>Property was wrongfully tracked and is not part of the schema</td><td><code>error</code>, <code>toRemove</code></td></tr><tr><td>Replace in base64 field in query string</td><td>Replaces part of a base64 field in the query string according to a regex</td><td>Property was sent as a string but should be an numeric</td><td><code>error</code>, <code>base64Field</code> (<code>cx</code> or <code>ue_px</code>), <code>toReplace</code>, <code>replacement</code></td></tr><tr><td>Replace in body</td><td>Replaces part of the body according to a regex</td><td>Misspecified a schema when using the Iglu webhook</td><td><code>error</code>, <code>toReplace</code>, <code>replacement</code></td></tr><tr><td>Remove from body</td><td>Removes part of the body according to a regex</td><td>Property was wrongfully tracked and is not part of the schema</td><td><code>error</code>, <code>toRemove</code></td></tr><tr><td>Replace in base64 field in body</td><td>Replaces part of a base64 field in the body according to a regex</td><td>Property was sent as a string but should be an numeric</td><td><code>error</code>, <code>base64Field</code> (<code>cx</code> or <code>ue_px</code>), <code>toReplace</code>, <code>replacement</code></td></tr></tbody></table><p>Note that, for every recovery scenario leveraging a regex, it’s possible to use capture groups. For example, to remove brackets but keep their content we would have a <code>toReplace</code> argument containing <code>\\{.*\\}</code> and a <code>replacement</code> argument containing <code>$1</code> (capture groups are one-based numbered).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-recovery-scenario">Custom recovery scenario<a class="hash-link" href="#custom-recovery-scenario" title="Direct link to heading">​</a></h3><p>If your recovery scenario is not covered by the ones listed above, you can define your own by extending <code>RecoveryScenario</code>. To extend <code>RecoveryScenario</code> you will need two things:</p><ul><li>an <code>error</code> which will be used to filter the incoming bad rows</li><li>a <code>mutate</code> function which will be used to actually modify the collector payload</li></ul><p>As an example, we can define a path mutating recovery scenario in <a href="https://docs.snowplowanalytics.com/open-source/snowplow/snowplow-event-recovery/0.1.0/core/src/main/scala/com.snowplowanalytics.snowplow.event.recovery/RecoveryScenario.scala" target="_blank" rel="noopener noreferrer"><code>RecoveryScenario.scala</code></a>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">final case class ReplaceInPath(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  error: String,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  toReplace: String,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  replacement: String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">) extends RecoveryScenario {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  def mutate(payload: CollectorPayload): CollectorPayload = {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (payload.path != null)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      payload.path = payload.path.replaceAll(toReplace, replacement)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    payload</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you think your recovery scenario will be useful to others, please consider opening a pull request!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing">Testing<a class="hash-link" href="#testing" title="Direct link to heading">​</a></h2><p>You’ll need to have cloned this repository to run those tests and downloaded <a href="https://www.scala-sbt.org/" target="_blank" rel="noopener noreferrer">SBT</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-complete-recovery">A complete recovery<a class="hash-link" href="#a-complete-recovery" title="Direct link to heading">​</a></h3><p>You can test a complete recovery, starting from bad rows to getting the data enriched by:</p><ul><li>Modifying the <a href="https://docs.snowplowanalytics.com/open-source/snowplow/snowplow-event-recovery/0.1.0/core/src/test/resources/bad_rows.json" target="_blank" rel="noopener noreferrer"><code>bad_rows.json</code></a> file which should contain examples of bad rows you want to recover</li><li>Adding your recovery scenarios to <a href="https://docs.snowplowanalytics.com/open-source/snowplow/snowplow-event-recovery/0.1.0/core/src/test/resources/recovery_scenarios.json" target="_blank" rel="noopener noreferrer"><code>recovery_scenarios.json</code></a></li><li>Fill out the payloads you’re expecting to generate after the recovery is run in <a href="https://docs.snowplowanalytics.com/open-source/snowplow/snowplow-event-recovery/0.1.0/core/src/test/resources/expected_payloads.json" target="_blank" rel="noopener noreferrer"><code>expected_payloads.json</code></a>. Here you have the choice of specifying a payload containing a querystring or a payload.</li><li>If your recovery is relying on specific Iglu repositories additionally to Iglu central, you’ll need to specify those repositories in <a href="https://docs.snowplowanalytics.com/open-source/snowplow/snowplow-event-recovery/0.1.0/core/src/test/resources/resolver.json" target="_blank" rel="noopener noreferrer"><code>resolver.json</code></a></li><li>If your recovery is relying on specific enrichments, you’ll need to add them to <a href="https://docs.snowplowanalytics.com/open-source/snowplow/snowplow-event-recovery/0.1.0/core/src/test/resources/enrichments.json" target="_blank" rel="noopener noreferrer"><code>enrichments.json</code></a></li></ul><p>Once this is all done, you can run <code>sbt &quot;project core&quot; &quot;testOnly *IntegrationSpec&quot;</code>. What this process will do is:</p><ul><li>Run the recovery on the bad rows contained in <code>bad_rows.json</code> according to the configuration in <code>recovery_scenarios.json</code></li><li>Check that the recovered payloads outputted by the recovery conform to the contents of the expected payloads in <code>expected_payloads.json</code></li><li>Check that these recovered payloads pass enrichments, optionally leveraging the additional Iglu repositories and enrichments</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-custom-recovery-scenario">A custom recovery scenario<a class="hash-link" href="#a-custom-recovery-scenario" title="Direct link to heading">​</a></h3><p>If you’ve written an additional recovery scenario you’ll need to add the corresponding unit tests to <a href="https://docs.snowplowanalytics.com/open-source/snowplow/snowplow-event-recovery/0.1.0/core/src/test/scala/com.snowplowanalytics.snowplow.event.recovery/RecoveryScenarioSpec.scala" target="_blank" rel="noopener noreferrer"><code>RecoverScenarioSpec.scala</code></a> and then run <code>sbt test</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="output">Output<a class="hash-link" href="#output" title="Direct link to heading">​</a></h2><p>The output of Snowplow Event Recovery can be fed into an enrichment platform to be enriched.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h2><p>Once you have identified the different recovery scenarios you will want to run, you can construct the configuration that will be leveraging them. Here, we make use of each and every one of them as a showcase.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;schema&quot;: &quot;iglu:com.snowplowanalytics.snowplow/recoveries/jsonschema/1-0-0&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;data&quot;: [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Schema com.acme/my_schema/jsonschema/1-0-0 was added after the fact</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;name&quot;: &quot;PassThrough&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;error&quot;: &quot;Could not find schema with key iglu:com.acme/my_schema/jsonschema/1-0-0 in any repository&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Typo in the schema name when using the Iglu webhook</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;name&quot;: &quot;ReplaceInQueryString&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;error&quot;: &quot;Could not find schema with key iglu:com.snowplowanalytics.snowplow/screen_vie/jsonschema/1-0-0 in any repository&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;toReplace&quot;: &quot;schema=iglu%3Acom.snowplowanalytics.snowplow%2Fscreen_vie%2Fjsonschema%2F1-0-0&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;replacement&quot;: &quot;schema=iglu%3Acom.snowplowanalytics.snowplow%2Fscreen_view%2Fjsonschema%2F1-0-0&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Removes illegal curlies in query strings (e.g. templates that haven&#x27;t been filled)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;name&quot;: &quot;RemoveFromQueryString&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;error&quot;: &quot;Exception extracting name-value pairs from querystring&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;toRemove&quot;: &quot;\\{.*\\}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Replaces a string by an integer in ue_px, it can be reused for ReplaceInBase64FieldInBody</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;name&quot;: &quot;ReplaceInBase64FieldInQueryString&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;error&quot;: &quot;instance type (string) does not match any allowed primitive type (allowed: [\&quot;integer\&quot;])\n    level: \&quot;error\&quot;\n    schema: {\&quot;loadingURI\&quot;:\&quot;#\&quot;,\&quot;pointer\&quot;:\&quot;/properties/sessionIndex\&quot;&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;base64Field&quot;: &quot;ue_px&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;toReplace&quot;: &quot;\&quot;sessionIndex\&quot;:\&quot;(\\d+)\&quot;&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      # $1 refers to the first capture group</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;replacement&quot;: &quot;\&quot;sessionIndex\&quot;:$1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Replaces the device created timestamp by a string</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;name&quot;: &quot;ReplaceInBody&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;error&quot;: &quot;instance type (integer) does not match any allowed primitive type (allowed: [\&quot;string\&quot;])\n    level: \&quot;error\&quot;\n    schema: {\&quot;loadingURI\&quot;:\&quot;#\&quot;,\&quot;pointer\&quot;:\&quot;/items/properties/dtm\&quot;&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;toReplace&quot;: &quot;\&quot;dtm\&quot;:(\\d+)&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;replacement&quot;: &quot;\&quot;dtm\&quot;:\&quot;$1\&quot;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Removes a field which shouldn&#x27;t be there</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;name&quot;: &quot;RemoveFromBody&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;error&quot;: &quot;object instance has properties which are not allowed by the schema: [\&quot;test\&quot;]&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;toRemove&quot;: &quot;\&quot;test\&quot;:\&quot;.*\&quot;,?&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Same as ReplaceInBase64FieldInQueryString</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;name&quot;: &quot;ReplaceInBase64FieldInBody&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;error&quot;: &quot;instance type (string) does not match any allowed primitive type (allowed: [\&quot;integer\&quot;])\n    level: \&quot;error\&quot;\n    schema: {\&quot;loadingURI\&quot;:\&quot;#\&quot;,\&quot;pointer\&quot;:\&quot;/properties/sessionIndex\&quot;&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;base64Field&quot;: &quot;ue_px&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;toReplace&quot;: &quot;\&quot;sessionIndex\&quot;:\&quot;(\\d+)\&quot;&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      # $1 refers to the first capture group</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;replacement&quot;: &quot;\&quot;sessionIndex\&quot;:$1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    # Our custom recovery scenario, replaces a wrong Iglu webhook path</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;name&quot;: &quot;ReplaceInPath&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;error&quot;: &quot;Payload with vendor com.iglu and version v1 not supported&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;toReplace&quot;: &quot;com.iglu/v1&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;replacement&quot;: &quot;com.snowplowanalytics.iglu/v1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-details">Technical details<a class="hash-link" href="#technical-details" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spark-for-aws-real-time">Spark for AWS real-time<a class="hash-link" href="#spark-for-aws-real-time" title="Direct link to heading">​</a></h3><p>The Spark job reads bad rows from an S3 location and stores the recovered payloads in another S3 location.</p><p>To build the fat jar, run: <code>sbt &quot;project spark&quot; assembly</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="beam-for-gcp-real-time">Beam for GCP real-time<a class="hash-link" href="#beam-for-gcp-real-time" title="Direct link to heading">​</a></h3><p>The Beam job reads data from a GCS location specified through a pattern and stores the recovered payloads in a PubSub topic.</p><p>To build the zip archive, run: <code>sbt &quot;project beam&quot; universal:packageBin</code>.</p><p>To build the docker image, run: <code>sbt &quot;project beam&quot; docker:publishLocal</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="options">Options<a class="hash-link" href="#options" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spark-for-aws-real-time-1">Spark for AWS real-time<a class="hash-link" href="#spark-for-aws-real-time-1" title="Direct link to heading">​</a></h3><p>Using the JAR directly (which is hosted at <code>s3://snowplow-hosted-assets/3-enrich/snowplow-event-recovery/</code>):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">spark-submit \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --class com.snowplowanalytcs.snowplow.event.recovery.Main \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --master master-url \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --deploy-mode deploy-mode \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  snowplow-event-recovery-spark-0.1.0.jar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --input s3://bad-rows-location/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --output s3://recovered-collector-payloads-location/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --config base64-encoded-configuration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or through an EMR step:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">aws emr add-steps --cluster-id j-XXXXXXXX --steps \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Name=snowplow-event-recovery,\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Type=CUSTOM_JAR,\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Jar=s3://snowplow-hosted-assets/3-enrich/snowplow-event-recovery/snowplow-event-recovery-spark-0.1.0.jar,\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  MainClass=com.snowplowanalytics.snowplow.event.recovery.Main,\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Args=[--input,s3://bad-rows-location/,--output,s3://recovered-collector-payloads-location/,--config,base64-encoded-configuration],\</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ActionOnFailure=CONTINUE</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="beam-for-gcp-real-time-1">Beam for GCP real-time<a class="hash-link" href="#beam-for-gcp-real-time-1" title="Direct link to heading">​</a></h3><p>Using the zip archive which can be <a href="https://github.com/snowplow-incubator/snowplow-event-recovery/releases/tag/0.3.1" target="_blank" rel="noopener noreferrer">downloaded from Github</a>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./bin/snowplow-event-recovery-beam \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --runner=DataFlowRunner \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --project=project-id \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --zone=europe-west2-a \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --gcpTempLocation=gs://location/ \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --inputDirectory=gs://bad-rows-location/* \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --outputTopic=projects/project/topics/topic \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --config=base64-encoded-configuration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Using a Docker container, for which the image is available from <a href="https://hub.docker.com/r/snowplow/snowplow-event-recovery-beam" target="_blank" rel="noopener noreferrer">Docker Hub</a>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker run \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -v $PWD/config:/snowplow/config \ # if running outside GCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -e GOOGLE_APPLICATION_CREDENTIALS=/snowplow/config/credentials.json \ # if running outside GCP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  snowplow/snowplow-event-recovery-beam:0.1.0 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --runner=DataFlowRunner \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --project=project-id \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --zone=europe-west2-a \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --gcpTempLocation=gs://location/ \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --inputDirectory=gs://bad-rows-location/* \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --outputTopic=projects/project/topics/topic \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --config=base64-encoded-configuration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/snowplow/snowplow.github.io/tree/main/docs/managing-data-quality/snowplow-event-recovery/older-versions/0-1-x/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-08-26T17:48:07.000Z">Aug 26, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/managing-data-quality/snowplow-event-recovery/older-versions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Older versions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/using-the-snowplow-console"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Snowplow Console</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#recovery-scenarios" class="table-of-contents__link toc-highlight">Recovery Scenarios</a><ul><li><a href="#out-of-the-box-recovery-scenarios" class="table-of-contents__link toc-highlight">Out of the box recovery scenarios</a></li><li><a href="#custom-recovery-scenario" class="table-of-contents__link toc-highlight">Custom recovery scenario</a></li></ul></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a><ul><li><a href="#a-complete-recovery" class="table-of-contents__link toc-highlight">A complete recovery</a></li><li><a href="#a-custom-recovery-scenario" class="table-of-contents__link toc-highlight">A custom recovery scenario</a></li></ul></li><li><a href="#output" class="table-of-contents__link toc-highlight">Output</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#technical-details" class="table-of-contents__link toc-highlight">Technical details</a><ul><li><a href="#spark-for-aws-real-time" class="table-of-contents__link toc-highlight">Spark for AWS real-time</a></li><li><a href="#beam-for-gcp-real-time" class="table-of-contents__link toc-highlight">Beam for GCP real-time</a></li></ul></li><li><a href="#options" class="table-of-contents__link toc-highlight">Options</a><ul><li><a href="#spark-for-aws-real-time-1" class="table-of-contents__link toc-highlight">Spark for AWS real-time</a></li><li><a href="#beam-for-gcp-real-time-1" class="table-of-contents__link toc-highlight">Beam for GCP real-time</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a class="footer__link-item" href="/cookie-settings">Change cookie settings</a><span class="footer__link-separator">·</span><a class="footer__link-item" href="/terms-and-conditions">Terms and conditions</a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Snowplow Analytics Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c89fe471.js"></script>
<script src="/assets/js/main.f9862780.js"></script>
</body>
</html>