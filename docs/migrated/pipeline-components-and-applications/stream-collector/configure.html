<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-migrated/pipeline-components-and-applications/stream-collector/configure/index">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<title data-rh="true">Configure the Stream Collector | Snowplow Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://andy-hay.github.io/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/stream-collector/configure"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configure the Stream Collector | Snowplow Docs"><meta data-rh="true" name="description" content="This is a complete list of the options that can be configured in the collector HOCON config file. The example configs in github show how to prepare an input file. Some features are described in more detail at the bottom of this page."><meta data-rh="true" property="og:description" content="This is a complete list of the options that can be configured in the collector HOCON config file. The example configs in github show how to prepare an input file. Some features are described in more detail at the bottom of this page."><link data-rh="true" rel="icon" href="/docsite-poc.github.io/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://andy-hay.github.io/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/stream-collector/configure"><link data-rh="true" rel="alternate" href="https://andy-hay.github.io/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/stream-collector/configure" hreflang="en"><link data-rh="true" rel="alternate" href="https://andy-hay.github.io/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/stream-collector/configure" hreflang="x-default"><link rel="stylesheet" href="/docsite-poc.github.io/assets/css/styles.96d61308.css">
<link rel="preload" href="/docsite-poc.github.io/assets/js/runtime~main.70369f61.js" as="script">
<link rel="preload" href="/docsite-poc.github.io/assets/js/main.a8678f5c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docsite-poc.github.io/"><div class="navbar__logo"><img src="/docsite-poc.github.io/img/snowplow-icon-light-purple.svg" alt="SnowPlow Docs Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docsite-poc.github.io/img/snowplow-icon-light-purple.svg" alt="SnowPlow Docs Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Snowplow Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docsite-poc.github.io/docs/migrated">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Andy-Hay/docsite-poc.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docsite-poc.github.io/docs/migrated">Snowplow Documentation</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Documentation&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/getting-started-with-snowplow-bdp">Getting started on Snowplow BDP</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow BDP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/getting-started-on-snowplow-open-source">Getting started on Snowplow Open Source</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow Open Source&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/try-snowplow">Try Snowplow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Try Snowplow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/open-source-quick-start">Snowplow Open Source Quick Start</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Open Source Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/understanding-your-pipeline">Understanding your pipeline</a><button aria-label="Toggle the collapsible sidebar category &#x27;Understanding your pipeline&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/understanding-tracking-design">Designing tracking</a><button aria-label="Toggle the collapsible sidebar category &#x27;Designing tracking&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/collecting-data">Collecting data with Trackers and Webhooks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Collecting data with Trackers and Webhooks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/enriching-your-data">Enriching your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Enriching your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/modeling-your-data">Modeling your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Modeling your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/forwarding-events-to-destinations">Forwarding events to Destinations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Forwarding events to Destinations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/managing-data-quality">Managing data quality</a><button aria-label="Toggle the collapsible sidebar category &#x27;Managing data quality&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/using-the-snowplow-console">Snowplow Console</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Console&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications">Pipeline Components and Applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pipeline Components and Applications&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/version-compatibility-matrix">Version compatibility matrix</a><button aria-label="Toggle the collapsible sidebar category &#x27;Version compatibility matrix&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/stream-collector">Stream Collector</a><button aria-label="Toggle the collapsible sidebar category &#x27;Stream Collector&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/stream-collector/setup">Set up the stream collector</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/stream-collector/configure">Configure the Stream Collector</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/sqs2kinesis">Sqs2kinesis</a><button aria-label="Toggle the collapsible sidebar category &#x27;Sqs2kinesis&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/enrichment-components">Enrichment</a><button aria-label="Toggle the collapsible sidebar category &#x27;Enrichment&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/loaders-storage-targets">Loaders and storage targets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Loaders and storage targets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/iglu">Iglu</a><button aria-label="Toggle the collapsible sidebar category &#x27;Iglu&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/dataflow-runner">Dataflow Runner</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/snowplow-mini">Snowplow Mini</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Mini&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/piinguin">Piinguin</a><button aria-label="Toggle the collapsible sidebar category &#x27;Piinguin&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/right-to-be-forgotten-spark-application">Right to be Forgotten Spark Application</a><button aria-label="Toggle the collapsible sidebar category &#x27;Right to be Forgotten Spark Application&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/contributing">Community &amp; contributing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community &amp; contributing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docsite-poc.github.io/docs/migrated/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docsite-poc.github.io/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docsite-poc.github.io/docs/migrated"><span itemprop="name">Snowplow Documentation</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications"><span itemprop="name">Pipeline Components and Applications</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/stream-collector"><span itemprop="name">Stream Collector</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configure the Stream Collector</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configure the Stream Collector</h1></header><p>This is a complete list of the options that can be configured in the collector HOCON config file. The <a href="https://github.com/snowplow/stream-collector/tree/master/examples" target="_blank" rel="noopener noreferrer">example configs in github</a> show how to prepare an input file. Some features are described in more detail at the bottom of this page.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-options">Common options<a class="hash-link" href="#common-options" title="Direct link to heading">​</a></h3><table><thead><tr><th>collector.interface</th><th>Required. E.g. 0.0.0.0. The collector listens for http requests on this interface.</th></tr></thead><tbody><tr><td>collector.port</td><td>Required. The collector listens for http requests on this port.</td></tr><tr><td>collector.ssl.enable</td><td>Optional, default is false. The collector will also listen for https requests on a different port.</td></tr><tr><td>collector.ssl.port</td><td>Optional, default 443. The port on which to listen for https requests</td></tr><tr><td>collector.ssl.redirect</td><td>Optional, default false. If enabled, the collector redirects http requests to the https endpoint using a 301 status code</td></tr><tr><td>collector.paths</td><td>Optional. There are more details about this feature below. This is for customising the collector&#x27;s endpoints. You can also map any valid (ie, two-segment) path to one of the three default paths.</td></tr><tr><td>collector.p3p.policyRef</td><td>Optional, defaults to /w3c/p3p.xml. Configures the p3p http header.</td></tr><tr><td>collector.p3p.CP</td><td>Optiona,l, defaults to NOI DSP COR NID PSA OUR IND COM NAV STA. Configures the p3p http header.</td></tr><tr><td>collector.crossDomain.enabled</td><td>Optional, default is false. If enabled, the /crossdomain.xml endpoint returns a cross domain policy file.</td></tr><tr><td>collector.crossDomain.domains</td><td>Optional, default <!-- -->[*]<!-- --> meaning the cross domain policy file allows all domains. You could change this to a list of domains.</td></tr><tr><td>collector.crossDomain.secure</td><td>Optional, default true. Configures whether the cross domain policy file grants access to just HTTPS or both HTTP and HTTPS sources</td></tr><tr><td>collector.cookie.enabled</td><td>Optional, default true. The collector sets a cookie to set the user&#x27;s network user id. Change this to false to disable setting cookies.Regardless of this setting, if the collector receives a request with the custom SP-Anonymous:* header, no cookie will be set. You can control whether this header is set or not in your tracking implementation.</td></tr><tr><td>collector.cookie.expiration</td><td>Optional, default 365 days. Configures the expiry of the collector&#x27;s cookie.</td></tr><tr><td>collector.cookie.name</td><td>Optional, default sp. Configures the name of the collector&#x27;s cookie.</td></tr><tr><td>collector.cookie.domains</td><td>Optional, default to no domains. There is more details about this feature below. This is for fine control over the cookie&#x27;s domain attribute.</td></tr><tr><td>collector.cookie.fallbackDomain</td><td>Optional. If set, the fallback domain will be used for the cookie if none of the Origin header hosts matches the list of cookie domains.</td></tr><tr><td>collector.cookie.secure</td><td>Optional, default true. Sets the secure property of the cookie.</td></tr><tr><td>collector.cookie.httpOnly</td><td>Optional, default true. Sets the httpOnly property of the cookie.</td></tr><tr><td>collector.cookie.sameSite</td><td>Optional, default None. Sets the sameSite property of the cookie, so it can be Strict, Lax or None</td></tr><tr><td>collector.doNotTrackCookie.enabled</td><td>Optional, default false. If enabled, the collector respects a &quot;do not track&quot; cookie. If the cookie is present, it returns a 200 status code but it does not log the request to the output queue.</td></tr><tr><td>colletor.doNotTrackCookie.name</td><td>Required when the doNotTrackCookie feature is enabled. Configures the name of the cookie in which to check if tracking is disabled.</td></tr><tr><td>collector.doNotTrackCookie.value</td><td>Required when the doNotTrackCookie feature is enabled. Can be a regular expression. The value of the cookie must match this expression in order for the collector to respect the cookie.</td></tr><tr><td>collector.cookieBounce.enabled</td><td>Optional, default false. When enabled, when the cookie is missing, the collector performs a redirect to itself to check if third-party cookies are blocked using the specified name. If they are indeed blocked, fallbackNetworkId is used instead of generating a new random one.</td></tr><tr><td>collector.cookieBounce.name</td><td>Optional, default n3pc. The name of the request parameter which will be used on redirects checking that the third-party cookies work</td></tr><tr><td>collector.cookieBounce.fallbackNetworkUserId</td><td>Optional, default 00000000-0000-4000-A000-000000000000. Network user id to use when third-party cookies are blocked.</td></tr><tr><td>collector.cookieBounce.forwardedProtocolHeader</td><td>Optional. E.g. X-Forwarded-Proto. The header containing the originating protocol for use in the bounce redirect location. Use this if behind a load balancer that performs SSL termination.</td></tr><tr><td>collector.enableDefaultRedirect</td><td>Optional, default false. When enabled, the collector&#x27;s /r endpoint returns a 302 status code with a redirect back to a url specified with the ?u= query parameter.</td></tr><tr><td>collector.redirectDomainsAdded in version 2.5.0</td><td>Optional. Domains which are valid for collector redirects. If empty (the default) then redirects are allowed to any domain.</td></tr><tr><td>collector.redirectMacro.enabled</td><td>Optional, default false. When enabled, the redirect url passed via the u query parameter is scanned for a placeholder token. All occurrences of the placeholder are substituted with the cookie&#x27;s network user id.</td></tr><tr><td>collector.redirectMacro.placeholder</td><td>Optional, default ${SP_NUID}.</td></tr><tr><td>collector.rootResponse.enabled</td><td>Optional, default false. Enable custom response handling for the root &quot;/&quot; path.</td></tr><tr><td>collector.rootResponse.statusCode</td><td>Optional, default 302. The http status code to use when root response is enabled.</td></tr><tr><td>collector.rootResponse.headers</td><td>Optional. A map of key value pairs to include in the root response headers.</td></tr><tr><td>collector.rootResponse.body</td><td>Optional. The http response body to use when root response is enabled.</td></tr><tr><td>collector.cors.accessControlMaxAge</td><td>Optional, default &quot;60 minutes&quot;. Configures how long a the results of a preflight request can be cached by the browser. -1 seconds disables the cache.</td></tr><tr><td>collector.preTerminationPeriodAdded in version 2.5.0</td><td>Optional, default &quot;10 seconds&quot;. Configures how long the collector should pause after receiving a sigterm before starting the graceful shutdown. During this period the collector continues to accept new connections and respond to requests.</td></tr><tr><td>collector.preTerminationUnhealthyAdded in version 2.5.0</td><td>Optional, default false. During the preTerminationPeriod, the collector can be configured to return 503s on the /health endpoint. Can be helpful for removing the collector from a load balancer&#x27;s targets.</td></tr><tr><td>collector.terminationDeadlineAdded in version 2.5.0</td><td>Optional, default &quot;10 seconds&quot;. The akka server&#x27;s deadline for closing connections during graceful shutdown.</td></tr><tr><td>collector.prometheusMetrics.enabled</td><td>Optional, default false. When enabled, all requests are logged as prometheus metrics and the /metrics endpoint returns the report about the metrics.</td></tr><tr><td>collector.prometheusMetrics.durationBucketsInSeconds</td><td>Optional, e.g. <!-- -->[0.1, 3, 10]<!-- -->. Custom buckets for the http_request_duration_seconds_bucket duration prometheus metric.</td></tr><tr><td>collector.telemetry.disable</td><td>Optional, default false. Disable collecting meta-information about the running application. We use telemetry to help us improve the Snowplow product.</td></tr><tr><td>collector.telemetry.userProvidedId</td><td>Optional. It would help us out a lot if you provide a string unique to you, e.g. a uuid or your company name.</td></tr><tr><td>collector.experimental.warmup.enableAdded in version 2.7.0</td><td>Optional experimental feature, default false. When enabled, the collector sends some &quot;warm-up&quot; requests to its own /health endpoint during start up. We have found from experiment this can cut down the number of 502s returned from a load balancer in front of the collector in Kubernetes deployments.</td></tr><tr><td>collector.experimental.warmup.numRequestsAdded in version 2.7.0</td><td>Optional, default 2000. The number of requests to send if using the experimental warmup feature.</td></tr><tr><td>collector.experimental.warmup.maxConnectionsAdded in version 2.7.0</td><td>Optional, default 2000. How many TCP connections to open simultaneously when using the experimental warmup feature.</td></tr><tr><td>akka.*</td><td>Set<!-- --> <!-- -->any standard akka http option. For example,<!-- --> <!-- -->akka.loglevel = INFO</td></tr><tr><td>akka.ssl-config.*</td><td>Deprecated since collector version 2.4.0. Since 2.4.0, SSL config is instead configured via JVM system properties. See below for details.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kinesis-collector-options">Kinesis collector options<a class="hash-link" href="#kinesis-collector-options" title="Direct link to heading">​</a></h3><table><thead><tr><th>collector.streams.good</th><th>Required. Name of the output kinesis stream for successfully collected events</th></tr></thead><tbody><tr><td>collector.streams.bad</td><td>Required. Name of the output kinesis stream for http requests which could not be written to the good stream. For example, if the event size exceeds the kinesis limit of 1MB.</td></tr><tr><td>collector.streams.useIpAddressAsPartitionKey</td><td>Optional, default false. Whether to use the user&#x27;s IP address as the kinesis partition key.</td></tr><tr><td>collector.streams.sink.region</td><td>Optional, defaults to eu-central-1. AWS region of the kinesis streams.</td></tr><tr><td>collector.streams.sink.customEndpoint</td><td>Optional. Override the aws kinesis endpoints. Can be helpful when using localstack for testing.</td></tr><tr><td>collector.streams.sink.threadPoolSize</td><td>Optional, default 10. Configures the thread pool size used by the collector sink for asynchronous operations.</td></tr><tr><td>collector.streams.sink.sqsGoodBuffer</td><td>Optional. Set to the name of a SQS topic to enable buffering of good output events. When messages cannot be sent to Kinesis, (e.g. because of exceeding api limits) then they get sent to SQS as a fallback. Helpful for smoothing over traffic spikes.</td></tr><tr><td>collector.streams.sink.sqsBadBuffer</td><td>Optional. Like the sqsGoodBuffer but for failed events.</td></tr><tr><td>collector.streams.sink.aws.accessKey</td><td>Required. Set to default to use the default provider chain; set to iam to use AWS IAM roles; or set to env to use the AWS_ACCESS_KEY_ID environment variable.</td></tr><tr><td>collector.streams.sink.aws.secretKey</td><td>Required. Set to default to use the default provider chain; set to iam to use AWS IAM roles; or set to env to use the AWS_SECRET_ACCESS_KEY environment variable.</td></tr><tr><td>collector.streams.backoffPolicy.minBackoff</td><td>Optional, default 3000. Time in milliseconds for retrying sending to kinesis / SQS after failure.</td></tr><tr><td>colletor.streams.backoffPolicy.maxBackoff</td><td>Optional, default 600000. Time in milliseconds for retrying sending to kinesis / SQS after failure.</td></tr><tr><td>collector.streams.buffer.byteLimit</td><td>Optional, default 3145728. Incoming events are stored in an internal buffer before being sent to Kinesis. This configures the maximum total size of pending events.</td></tr><tr><td>collector.streams.buffer.recordLimit</td><td>Optional, default 50. Configures the maximum number of pending events before flushing to Kinesis.</td></tr><tr><td>collector.streams.buffer.timeLimit</td><td>Optional, default 5000. Configures the maximum time in milliseconds before flushing pending buffered events to Kinesis.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pubsub-collector-options">Pubsub collector options<a class="hash-link" href="#pubsub-collector-options" title="Direct link to heading">​</a></h3><table><thead><tr><th>collector.streams.good</th><th>Required. Name of the output Pubsub topic for successfully collected events</th></tr></thead><tbody><tr><td>collector.streams.bad</td><td>Required. Name of the output pubsub topic for http requests which could not be written to the good stream. For example, if the event size exceeds the Pubsub limit of 10MB.</td></tr><tr><td>collector.streams.sink.googleProjectId</td><td>Required. GCP project name.</td></tr><tr><td>collector.streams.sink.backoffPolicy.minBackoff</td><td>Optional, default 1000. Time in milliseconds for retrying sending to Pubsub after failure.</td></tr><tr><td>collector.streams.sink.backoffPolicy.maxBackoff</td><td>Optional, default 1000. Time in milliseconds for retrying sending to Pubsub after failure</td></tr><tr><td>collector.streams.sink.backoffPolicy.totalBackoff</td><td>Optional, default 9223372036854. We set this to the maximum value so that we never give up on trying to send a message to pubsub.</td></tr><tr><td>collector.streams.sink.backoffPolicy.multipler</td><td>Optional, default 2. Configures time between retries after failing send message to Pubsub.</td></tr><tr><td>collector.streams.sink.backoffPolicy.initialRpcTimeoutAdded in version 2.5.0</td><td>Optional, default 10000. Time in milliseconds before a RPC call to Pubsub is aborted and retried.</td></tr><tr><td>collector.streams.sink.backoffPolicy.maxRpcTimeoutAdded in version 2.5.0</td><td>Optional, default 10000. Maximum time in milliseconds before RPC call to Pubsub is aborted and retried.</td></tr><tr><td>collector.streams.sink.backoffPolicy.rpcTimeoutMultiplerAdded in version 2.5.0</td><td>Optional, default 2. Configures how RPC timeouts are allowed to increase as they are retried.</td></tr><tr><td>collector.streams.buffer.byteLimit</td><td>Optional, default 1000000. Incoming events are stored in an internal buffer before being sent to Pubsub. This configures the maximum total size of pending eve</td></tr><tr><td>collector.streams.buffer.recordLimit</td><td>Optional, default 40. Configures the maximum number of pending events before flushing to Pubsub.</td></tr><tr><td>collector.streams.buffer.timeLimit</td><td>Optional, default 1000. Configures the maximum time in milliseconds before flushing pending buffered events to Pubsub.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-the-domain-name">Setting the domain name<a class="hash-link" href="#setting-the-domain-name" title="Direct link to heading">​</a></h3><p>Set the cookie name using the <code>collector.cookie.name</code> setting. To maintain backward compatibility with earlier versions of the collector, use the string &quot;sp&quot; as the cookie name.</p><p>The collector responds to valid requests with a <code>Set-Cookie</code> header, which may or may not specify a <code>domain</code> for the cookie.</p><p>If no domain is specified, the cookie will be set against the full collector domain, for example <code>collector.snplow.com</code>. That will mean that applications running elsewhere on <code>*.snplow.com</code> won&#x27;t be able to access it. If you don&#x27;t need to grant access to the cookie from other applications on the domain, then you can ignore the <code>domains</code> and <code>fallbackDomain</code> settings.</p><p>In earlier versions, you could specify a <code>domain</code> to tie the cookie to. For example, if set to <code>.snplow.com</code>, the cookie would have been accessible to other applications running on <code>*.snplow.com</code>. To do the same in this version, use the <code>fallbackDomain</code> setting but <strong>make sure</strong> that you no longer include a leading dot:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">fallbackDomain = &quot;snplow.com&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The cookie set by the collector can be treated differently by browsers, depending on whether it&#x27;s considered to be a first-party or a third-party cookie. In earlier versions (0.15.0 and earlier), if you had two collector endpoints, one on <code>collector.snplow.com</code> and one on <code>collector.snplow.net</code>, you could only specify one of those domains in the configuration. That meant that you were only able to set a first-party cookie server-side on either <code>.snplow.com</code> or <code>.snplow.net</code>, but not on both. From version 0.16.0, you can specify a list of domains to be used for the cookie (<strong>note the lack of a leading dot</strong>):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">domains = [</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;snplow.com&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;snplow.net&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Which domain to be used in the <code>Set-Cookie</code> header is determined by matching the domains from the <code>Origin</code> header of the request to the specified list. The first match is used. If no matches are found, the fallback domain will be used, if configured. If no <code>fallbackDomain</code> is configured, the cookie will be tied to the full collector domain.</p><p>If you specify a main domain in the list, all subdomains on it will be matched. If you specify a subdomain, only that subdomain will be matched.</p><p>Examples:</p><ul><li><code>domain.com</code> will match <code>Origin</code> headers like <code>domain.com</code>, <code>www.domain.com</code> and <code>secure.client.domain.com</code></li><li><code>client.domain.com</code> will match an <code>Origin</code> header like <code>secure.client.domain.com</code> but not <code>domain.com</code> or <code>www.domain.com</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-custom-paths">Configuring custom paths<a class="hash-link" href="#configuring-custom-paths" title="Direct link to heading">​</a></h3><p>The collector responds with a cookie to requests with a path that matches the <code>vendor/version</code> protocol. The expected values are:</p><ul><li><code>com.snowplowanalytics.snowplow/tp2</code> for Tracker Protocol 2</li><li><code>r/tp2</code> for redirects</li><li><code>com.snowplowanalytics.iglu/v1</code> for the Iglu Webhook.</li></ul><p>You can also map any valid (ie, two-segment) path to one of the three defaults via the <code>collector.paths</code> section of the configuration file. Your custom path must be the key and the value must be one of the corresponding default paths. Both must be full valid paths starting with a leading slash:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">paths {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;/com.acme/track&quot;    = &quot;/com.snowplowanalytics.snowplow/tp2&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;/com.acme/redirect&quot; = &quot;/r/tp2&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;/com.acme/iglu&quot;     = &quot;/com.snowplowanalytics.iglu/v1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tls-port-binding-and-certificate-240">TLS port binding and certificate (2.4.0+)<a class="hash-link" href="#tls-port-binding-and-certificate-240" title="Direct link to heading">​</a></h3><p>Since 2.4.0 TLS certificates are configured using JVM system parameters. The &quot;<code>Customizing JSSE</code>&quot; section in <a href="https://docs.oracle.com/en/java/javase/11/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-A41282C3-19A3-400A-A40F-86F4DA22ABA9" target="_blank" rel="noopener noreferrer">Java 11 JSSE reference documentation</a> explains all system properties in detail.</p><p>The following JVM properties are the ones to be used most of the time.</p><table><thead><tr><th>System Property</th><th>Customized Item</th><th>Default</th><th>Notes</th></tr></thead><tbody><tr><td><code>javax.net.ssl.keyStore</code></td><td>Default keystore; see <a href="https://docs.oracle.com/en/java/javase/11/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-7D9F43B8-AABF-4C5B-93E6-3AFB18B66150" target="_blank" rel="noopener noreferrer">Customizing the Default Keystores and Truststores, Store Types, and Store Passwords</a></td><td>None</td><td> </td></tr><tr><td><code>javax.net.ssl.keyStorePassword</code></td><td>Default keystore password; see <a href="https://docs.oracle.com/en/java/javase/11/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-7D9F43B8-AABF-4C5B-93E6-3AFB18B66150" target="_blank" rel="noopener noreferrer">Customizing the Default Keystores and Truststores, Store Types, and Store Passwords</a></td><td>None</td><td>It is inadvisable to specify the password in a way that exposes it to discovery by other users.</td></tr></tbody></table><p><strong>Password can not be empty.</strong> |
| <code>javax.net.ssl.keyStoreType</code> | Default keystore type; see <a href="https://docs.oracle.com/en/java/javase/11/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-7D9F43B8-AABF-4C5B-93E6-3AFB18B66150" target="_blank" rel="noopener noreferrer">Customizing the Default Keystores and Truststores, Store Types, and Store Passwords</a> | <code>PKCS12</code> |    |
| <code>jdk.tls.server.cipherSuites</code> | Server-side default enabled cipher suites. See <a href="https://docs.oracle.com/en/java/javase/11/security/java-secure-socket-extension-jsse-reference-guide.html#GUID-D61663E8-2405-4B2D-A1F1-B8C7EA2688DB" target="_blank" rel="noopener noreferrer">Specifying Default Enabled Cipher Suites</a> | See <a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2__SUNJSSE_CIPHER_SUITES" target="_blank" rel="noopener noreferrer">SunJSSE Cipher Suites</a> to determine which cipher suites are enabled by default | Caution: These system properties can be used to configure weak cipher suites, or the configured cipher suites may be weak in the future. It is not recommended that you use these system properties without understanding the risks. |
| <code>jdk.tls.server.protocols</code> | Default handshaking protocols for TLS/DTLS servers. See <a href="https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2" target="_blank" rel="noopener noreferrer">The SunJSSE Provider</a> | None | To configure the default enabled protocol suite in the server-side of a SunJSSE provider, specify the protocols in a comma-separated list within quotation marks. The protocols in this list are standard SSL protocol names as described in <a href="https://docs.oracle.com/en/java/javase/11/docs/specs/security/standard-names.html" target="_blank" rel="noopener noreferrer">Java Security Standard Algorithm Names</a>. Note that this System Property impacts only the default protocol suite (SSLContext of the algorithms SSL, TLS and DTLS). If an application uses a version-specific SSLContext (SSLv3, TLSv1, TLSv1.1, TLSv1.2, TLSv1.3, DTLSv1.0, or DTLSv1.2), or sets the enabled protocol version explicitly, this System Property has no impact. |</p><p>A deployment would need a TLS certificate, preferably issued by a trusted CA, however, for test purposes, a TLS cert could be generated as follows</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ssl_dir=/opt/snowplow/ssl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mkdir -p ${ssl_dir}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo openssl req \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -x509 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -newkey rsa:4096 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -keyout ${ssl_dir}/collector_key.pem \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -out ${ssl_dir}/collector_cert.pem \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -days 3650 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -nodes \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -subj &quot;/C=UK/O=Acme/OU=DevOps/CN=*.acme.com&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo openssl pkcs12 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -export \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -out ${ssl_dir}/collector.p12 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -inkey ${ssl_dir}/collector_key.pem \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -in ${ssl_dir}/collector_cert.pem \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -passout pass:changeme</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo chmod 644 ${ssl_dir}/collector.p12</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and then the collector (kinesis as example) could be started as follows</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">config_dir=/opt/snowplow/config</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker run \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -d \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --name scala-stream-collector \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --restart always \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --network host \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -v ${config_dir}:/snowplow/config \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -v ${ssl_dir}:/snowplow/ssl \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -p 8080:8080 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -p 8443:8443 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -e &#x27;JAVA_OPTS=-Xms2g -Xmx2g -Djavax.net.ssl.keyStoreType=pkcs12 -Djavax.net.ssl.keyStorePassword=changeme -Djavax.net.ssl.keyStore=/snowplow/ssl/collector.p12 -Dorg.slf4j.simpleLogger.defaultLogLevel=warn -Dcom.amazonaws.sdk.disableCbor&#x27; \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  snowplow/scala-stream-collector-kinesis:2.5.0 \</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --config /snowplow/config/snowplow-stream-collector-kinesis-2.5.0.hocon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note: If you don&#x27;t have a verified certificate, you need to disable SSL verification on client side. e.g. <code>cURL</code>&#x27;s <code>-k, --insecure</code> flag disables it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-an-sqs-buffer-200">Setting up an SQS buffer (2.0.0+)<a class="hash-link" href="#setting-up-an-sqs-buffer-200" title="Direct link to heading">​</a></h3><p>The lack of auto-scaling in Kinesis results in throttled streams in case of traffic spikes and Stream Collector starts accumulating events to retry them later. If accumulation continues long enough, Stream Collector will run out of memory. To prevent the possibility of a broken collector, we decided to make it possible to configure an SQS buffer that can provide additional assurance during extreme traffic spikes.</p><p>SQS is used to queue any message that Stream Collector failed to send to the Kinesis and the <a href="/docsite-poc.github.io/docs/migrated/getting-started-on-snowplow-open-source/setup-snowplow-on-aws/setup-the-snowplow-collector/optional-run-the-sqs2kinesis-app"><code>sqs2kinesis</code> application</a> is then responsible for reading the messages from SQS and writing to Kinesis once it is ready. In the event of any AWS API glitches, there is a retry mechanism which retries sending the SQS queue 10 times.</p><p>The keys set up for the Kinesis stream are stored as SQS message attributes in order to preserve the information. Note, the SQS messages cannot be as big as Kinesis messages. The limit is 256kB per message, but we send the messages as Base64 encoded, so the limit goes down to 192kB for the original message.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-the-sqs-queues">Setting up the SQS queues<a class="hash-link" href="#setting-up-the-sqs-queues" title="Direct link to heading">​</a></h4><p>(This section only applies to the case when SQS is used as a fallback sink when Kinesis is unavailable. If you are using SQS as the primary sink, then the settings below should be ignored and the <code>good</code> and <code>bad</code> streams should be configured as normal under <code>streams.good</code> and <code>streams.bad</code> respectively.)</p><p>To start using this feature, you will first need to set up the SQS queues. Two separate queues are required for good (raw) events and bad events. The Collector then needs to be informed about the queue names, and this can be done by adding these as entries to <code>config.hocon:</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sqsGoodBuffer = {good-sqs-queue-url}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sqsBadBuffer = {bad-sqs-queue-url}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="telemetry">Telemetry<a class="hash-link" href="#telemetry" title="Direct link to heading">​</a></h4><p>Starting with version 2.4.0 of the collector snowplow will be collecting the heartbeats with some meta-information about the application. This is an opt-out feature, meaning that it has to be explicitly disabled to stop it. Schema is available <a href="https://raw.githubusercontent.com/snowplow/iglu-central/master/schemas/com.snowplowanalytics.oss/oss_context/jsonschema/1-0-1" target="_blank" rel="noopener noreferrer">here</a>.</p><p>At the base, telemetry is sending the application name and version every hour. This is done to help us to improve the product, we need to understand what is popular, so we could focus our development effort in the right place. You can help us by providing <code>userProvidedId</code> in the config file.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">telemetry {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    userProvidedId = myCompany</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Put the following entry into your configuration file to disable the telemetry.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">telemetry {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    disable = true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-08-15T12:57:30.000Z">Aug 15, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/stream-collector/setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Set up the stream collector</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docsite-poc.github.io/docs/migrated/pipeline-components-and-applications/sqs2kinesis"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sqs2kinesis</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#common-options" class="table-of-contents__link toc-highlight">Common options</a></li><li><a href="#kinesis-collector-options" class="table-of-contents__link toc-highlight">Kinesis collector options</a></li><li><a href="#pubsub-collector-options" class="table-of-contents__link toc-highlight">Pubsub collector options</a></li><li><a href="#setting-the-domain-name" class="table-of-contents__link toc-highlight">Setting the domain name</a></li><li><a href="#configuring-custom-paths" class="table-of-contents__link toc-highlight">Configuring custom paths</a></li><li><a href="#tls-port-binding-and-certificate-240" class="table-of-contents__link toc-highlight">TLS port binding and certificate (2.4.0+)</a></li><li><a href="#setting-up-an-sqs-buffer-200" class="table-of-contents__link toc-highlight">Setting up an SQS buffer (2.0.0+)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/snowplow/snowplow" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub for Open Source Snowplow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discourse.snowplowanalytics.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://snowplowanalytics.com/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.meetup.com/topics/snowplow/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meetups<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://snowplowanalytics.com/events/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Andy-Hay/docsite-poc.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub for these docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Snowplow Analytics Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docsite-poc.github.io/assets/js/runtime~main.70369f61.js"></script>
<script src="/docsite-poc.github.io/assets/js/main.a8678f5c.js"></script>
</body>
</html>