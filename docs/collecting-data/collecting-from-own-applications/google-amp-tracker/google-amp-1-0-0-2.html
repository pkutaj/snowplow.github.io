<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-collecting-data/collecting-from-own-applications/google-amp-tracker/google-amp-1-0-0-2/index">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-159566509-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-M24XMJD"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-M24XMJD",{anonymize_ip:!0})</script><title data-rh="true">Google AMP (1.0.3) | Snowplow Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.snowplowanalytics.com/docs/collecting-data/collecting-from-own-applications/google-amp-tracker/google-amp-1-0-0-2"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Google AMP (1.0.3) | Snowplow Documentation"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.snowplowanalytics.com/docs/collecting-data/collecting-from-own-applications/google-amp-tracker/google-amp-1-0-0-2"><link data-rh="true" rel="alternate" href="https://docs.snowplowanalytics.com/docs/collecting-data/collecting-from-own-applications/google-amp-tracker/google-amp-1-0-0-2" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.snowplowanalytics.com/docs/collecting-data/collecting-from-own-applications/google-amp-tracker/google-amp-1-0-0-2" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a6feea07.css">
<link rel="preload" href="/assets/js/runtime~main.e6aef96b.js" as="script">
<link rel="preload" href="/assets/js/main.957d7bc5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/snowplow-logo.svg" alt="Snowplow Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/snowplow-logo.svg" alt="Snowplow Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link nav-link__first customized_AOMy navbar__link--active" href="/docs">Docs</a><a href="https://discourse.snowplowanalytics.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link undefined customized_AOMy">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/snowplow/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link undefined customized_AOMy">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://try.snowplowanalytics.com/?utm_content=hero-cta&amp;utm_campaign=snowplow-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link snwpl-nav-button customized_AOMy">Try Snowplow</a><a href="https://go.snowplowanalytics.com/l/571483/2021-02-19/3sn5nml" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link snwpl-nav-button customized_AOMy">Book a demo</a><div class="toggle_vylO extraSpace_k8HL"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG extraPadding_YQbj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started-with-snowplow-bdp">Getting started on Snowplow BDP</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow BDP&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/getting-started-on-snowplow-open-source">Getting started on Snowplow Open Source</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting started on Snowplow Open Source&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/try-snowplow">Try Snowplow</a><button aria-label="Toggle the collapsible sidebar category &#x27;Try Snowplow&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/open-source-quick-start">Snowplow Open Source Quick Start</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Open Source Quick Start&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/understanding-your-pipeline">Understanding your pipeline</a><button aria-label="Toggle the collapsible sidebar category &#x27;Understanding your pipeline&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/understanding-tracking-design">Designing tracking</a><button aria-label="Toggle the collapsible sidebar category &#x27;Designing tracking&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/collecting-data">Collecting data with Trackers and Webhooks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Collecting data with Trackers and Webhooks&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications">Trackers - collecting data from your own applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Trackers - collecting data from your own applications&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/snowplow-tracker-protocol">Snowplow Tracker Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/tracker-maintenance-classification">Tracker Maintenance Classification</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/javascript-trackers">JavaScript Trackers (Web and Node.js)</a><button aria-label="Toggle the collapsible sidebar category &#x27;JavaScript Trackers (Web and Node.js)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/mobile-trackers">Mobile Native Trackers</a><button aria-label="Toggle the collapsible sidebar category &#x27;Mobile Native Trackers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/react-native-tracker">React Native Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;React Native Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/flutter-tracker">Flutter Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Flutter Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/roku-tracker">Roku Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Roku Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/google-amp-tracker">Google AMP Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Google AMP Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/google-amp-tracker/google-amp-1-0-0-2">Google AMP (1.0.3)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/google-amp-tracker/google-amp-1-0-0">Google AMP (0.1.0)</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/pixel-tracker">Pixel Tracker</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/golang-tracker">Golang Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Golang Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/net-tracker">.NET Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;.NET Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/java-tracker">Java Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Java Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/python-tracker">Python Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Python Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/scala-tracker">Scala Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Scala Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/ruby-tracker">Ruby Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ruby Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/php-tracker">PHP Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;PHP Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/c-tracker">C++ Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;C++ Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/unity-tracker">Unity Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/snowplow-tracking-cli">Tracking CLI</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tracking CLI&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/lua-tracker">Lua Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;Lua Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/google-analytics-plugin">Google Analytics Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/arduino-tracker">Arduino Tracker</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-from-own-applications/actionscript3-tracker">ActionScript3 Tracker</a><button aria-label="Toggle the collapsible sidebar category &#x27;ActionScript3 Tracker&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/collecting-data/collecting-data-from-third-parties">Webhooks - collecting data from third parties</a><button aria-label="Toggle the collapsible sidebar category &#x27;Webhooks - collecting data from third parties&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/enriching-your-data">Enriching your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Enriching your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/modeling-your-data">Modeling your data</a><button aria-label="Toggle the collapsible sidebar category &#x27;Modeling your data&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/forwarding-events-to-destinations">Forwarding events to Destinations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Forwarding events to Destinations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/managing-data-quality">Managing data quality</a><button aria-label="Toggle the collapsible sidebar category &#x27;Managing data quality&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/using-the-snowplow-console">Snowplow Console</a><button aria-label="Toggle the collapsible sidebar category &#x27;Snowplow Console&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/pipeline-components-and-applications">Pipeline Components and Applications</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pipeline Components and Applications&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/contributing">Community &amp; contributing</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community &amp; contributing&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/collecting-data"><span itemprop="name">Collecting data with Trackers and Webhooks</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/collecting-data/collecting-from-own-applications"><span itemprop="name">Trackers - collecting data from your own applications</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/collecting-data/collecting-from-own-applications/google-amp-tracker"><span itemprop="name">Google AMP Tracker</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Google AMP (1.0.3)</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Google AMP (1.0.3)</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h2><p>Snowplow is collaborating with Google on their  <a href="https://www.ampproject.org/" target="_blank" rel="noopener noreferrer">Accelerated Mobile Pages Project</a> (AMPP or AMP for short). AMP is an open source (Apache License 2.0) initiative to improve the mobile web experience by optimizing web pages for mobile devices.</p><p>To learn more about analytics for AMP pages see the <a href="https://www.ampproject.org/docs/reference/extended/amp-analytics.html" target="_blank" rel="noopener noreferrer">amp-analytics</a> reference. For general information about AMP see <a href="https://www.ampproject.org/docs/get_started/about-amp.html" target="_blank" rel="noopener noreferrer">What Is AMP?</a> on the <a href="https://www.ampproject.org/" target="_blank" rel="noopener noreferrer">Accelerated Mobile Pages (AMP) Project</a> site.</p><p>Snowplow is natively integrated into the project, so pages optimized with AMP HTML can be tracked in Snowplow by adding the appropriate <code>amp-analytics</code> tag to your pages:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;body&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;amp-analytics type=&quot;snowplow_v2&quot; id=&quot;snowplow_v2&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;script type=&quot;application/json&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     &quot;collectorHost&quot;: &quot;collector.snplow.net&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     &quot;appId&quot;: &quot;amp-examples-v2.0.2&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;linkers&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     &quot;enabled&quot;: true,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;triggers&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     &quot;defaultPageview&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       &quot;on&quot;: &quot;visible&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       &quot;request&quot;: &quot;pageView&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;/script&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &lt;/amp-analytics&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/body&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>*<!-- -->Note:<!-- -->*<!-- --> The tracker utilises AMP linker functionality to ensure that user identification can be done where a user may visit via the google domain or the site&#x27;s own domain. In order to function, this requires that linkers are enabled in the amp-analytics configuration. Not doing so can result in changing AMP client Ids (which are the primary user identifier).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="redshift-users">Redshift Users<a class="hash-link" href="#redshift-users" title="Direct link to heading">​</a></h3><p>The v2 AMP tracker attaches two custom contexts to all events by defaul. Redshift users using RDB 0.16 or earlier must create the <code>amp_id_1</code> and <code>amp_web_page_1</code> tables before use. SQL definitions can be found in Iglu central</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="standard-variables">Standard variables<a class="hash-link" href="#standard-variables" title="Direct link to heading">​</a></h2><p><code>collectorHost</code> and <code>appId</code> must be provided in the <code>&quot;vars&quot;</code> section of the tag:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">},</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The rest are optional</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="collectorhost"><code>collectorHost</code><a class="hash-link" href="#collectorhost" title="Direct link to heading">​</a></h3><p>Specify the host to your collector like so:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;collectorHost&quot;: &quot;snowplow-collector.acme.com&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notes:</p><ul><li>Do <em>not</em> include the protocol aka schema (<code>http(s)://</code>)</li><li>Do <em>not</em> include a trailing slash</li><li>Use of HTTPS is mandatory in AMP, so your Snowplow collector <strong>must</strong> support HTTPS</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="appid"><code>appId</code><a class="hash-link" href="#appid" title="Direct link to heading">​</a></h3><p>You must set the application ID for the website you are tracking via AMP:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;appId&quot;: &quot;campaign-microsite&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Notes:</p><ul><li>You do not have to use the <code>appId</code> to distinguish AMP traffic from other web traffic (unless you want to) - see the  <a href="#analytics">Analytics</a> section for an alternative approach</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="userid"><code>userId</code><a class="hash-link" href="#userid" title="Direct link to heading">​</a></h3><p>Specify the optional <code>&quot;userId&quot;</code> var to set the uid/user<!-- -->_<!-- -->id  <a href="https://github.com/snowplow/snowplow/wiki/snowplow-tracker-protocol" target="_blank" rel="noopener noreferrer">Snowplow</a> <a href="/docs/collecting-data/collecting-from-own-applications/snowplow-tracker-protocol">tracker</a> <a href="https://github.com/snowplow/snowplow/wiki/snowplow-tracker-protocol" target="_blank" rel="noopener noreferrer">protocol</a> field.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;userId&quot;: &quot;someUserId&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nametracker"><code>nameTracker</code><a class="hash-link" href="#nametracker" title="Direct link to heading">​</a></h3><p>Specify the optional &quot;nameTracker&quot; var to set the tna/name<!-- -->_<!-- -->tracker <a href="/docs/collecting-data/collecting-from-own-applications/snowplow-tracker-protocol">Snowplow tracker protocol</a> field.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;nameTracker&quot;: &quot;someTrackerName&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="customcontexts"><code>customContexts</code><a class="hash-link" href="#customcontexts" title="Direct link to heading">​</a></h3><p>Custom contexts may be added by including Self-Describing JSON as a <code>&quot;customContexts&quot;</code> var, with <code>&quot;</code> characters escaped:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;customContexts&quot;:  &quot;{\&quot;schema\&quot;:\&quot;iglu:com.acme/first_context/jsonschema/1-0-0\&quot;,\&quot;data\&quot;:{\&quot;someKey\&quot;:\&quot;someValue\&quot;}}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Multiple custom contexts may be added by separating each self-describing JSON with a comma:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;customContexts&quot;:  &quot;{\&quot;schema\&quot;:\&quot;iglu:com.acme/first_context/jsonschema/1-0-0\&quot;,\&quot;data\&quot;:{\&quot;someKey\&quot;:\&quot;someValue\&quot;}},{\&quot;schema\&quot;:\&quot;iglu:com.acme/second_context/jsonschema/1-0-0\&quot;,\&quot;data\&quot;:{\&quot;someOtherKey\&quot;:\&quot;someOtherValue\&quot;}}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Custom contexts may either be set globally for all events (as a top-level var, see above) or per-event trigger:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;triggers&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;defaultPageview&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;on&quot;: &quot;click&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;selector&quot;: &quot;visible&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;request&quot;: &quot;pageView&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;customContexts&quot;:  &quot;{\&quot;schema\&quot;:\&quot;iglu:com.acme/first_context/jsonschema/1-0-0\&quot;,\&quot;data\&quot;:{\&quot;someKey\&quot;:\&quot;someValue\&quot;}}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These approaches may not currently be mixed, however.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tracking-events">Tracking events<a class="hash-link" href="#tracking-events" title="Direct link to heading">​</a></h2><p>The following trigger request values are supported for the Snowplow Analytics configuration:</p><ul><li><code>pageView</code> for page view tracking</li><li><code>structEvent</code> for structured event tracking</li><li><code>ampPagePing</code> for page ping tracking</li><li><code>selfDescribingEvent</code> for custom event tracking</li></ul><p>All event tracking is disabled by default; you can enable it on an event-by-event basis as follows:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="page-view">Page view<a class="hash-link" href="#page-view" title="Direct link to heading">​</a></h3><p>Enable the page view tracking like so:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;amp-analytics type=&quot;snowplow_v2&quot; id=&quot;event1&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;script type=&quot;application/json&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;collectorHost&quot;: &quot;snowplow-collector.acme.com&quot;,  // Replace with your collector host</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;appId&quot;: &quot;campaign-microsite&quot;                    // Replace with your app ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;triggers&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;trackPageview&quot;: {  // Trigger names can be any string. trackPageview is not a required name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;on&quot;: &quot;visible&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;request&quot;: &quot;pageView&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/amp-analytics&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="structured-events">Structured events<a class="hash-link" href="#structured-events" title="Direct link to heading">​</a></h3><p>Structured events are user interactions with content that can be tracked independently from a web page or a screen load. &quot;Structured&quot; refers to the Google Analytics-style structure of having up to five fields (with only the first two required).</p><p>Events can be sent by setting the AMP trigger request value to event and setting the required event category and action fields.</p><p>The following example uses the selector attribute of the trigger to send an event when a particular element is clicked:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;amp-analytics type=&quot;snowplow_v2&quot; id=&quot;event2&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;script type=&quot;application/json&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;collectorHost&quot;: &quot;snowplow-collector.acme.com&quot;,  // Replace with your collector host</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;appId&quot;: &quot;campaign-microsite&quot;                    // Replace with your app ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;triggers&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;trackClickOnHeader&quot; : {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;on&quot;: &quot;click&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;selector&quot;: &quot;#header&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;request&quot;: &quot;structEvent&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;structEventCategory&quot;: &quot;ui-components&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;structEventAction&quot;: &quot;header-click&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/amp-analytics&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can set key-value pairs for the following event fields in the vars attribute of the trigger:</p><table><thead><tr><th><strong>Argument</strong></th><th><strong>Description</strong></th><th><strong>Required?</strong></th><th><strong>Validation</strong></th></tr></thead><tbody><tr><td><code>structEventCategory</code></td><td>The grouping of structured events which this <code>action</code> belongs to</td><td>Yes</td><td>String</td></tr><tr><td><code>structEventAction</code></td><td>Defines the type of user interaction which this event involves</td><td>Yes</td><td>String</td></tr><tr><td><code>structEventLabel</code></td><td>A string to provide additional dimensions to the event data</td><td>No</td><td>String</td></tr><tr><td><code>structEventProperty</code></td><td>A string describing the object or the action performed on it</td><td>No</td><td>String</td></tr><tr><td><code>structEventValue</code></td><td>A value to provide numerical data about the event</td><td>No</td><td>Int or Float</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="page-pings">Page pings<a class="hash-link" href="#page-pings" title="Direct link to heading">​</a></h3><p>Enable page ping tracking like so:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;amp-analytics type=&quot;snowplow_v2&quot; id=&quot;event3&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;script type=&quot;application/json&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;collectorHost&quot;: &quot;snowplow-collector.acme.com&quot;,  // Replace with your collector host</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;appId&quot;: &quot;campaign-microsite&quot;                    // Replace with your app ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;triggers&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;trackPagePings&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;on&quot;: &quot;timer&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;request&quot;: &quot;ampPagePing&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;timerSpec&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;interval&quot;: 30,      // Set to desired ping interval</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;maxTimerLength&quot;: 1800,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;immediate&quot;: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;startSpec&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &quot;on&quot;: &quot;visible&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &quot;selector&quot;: &quot;:root&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;stopSpec&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &quot;on&quot;: &quot;hidden&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          &quot;selector&quot;: &quot;:root&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/amp-analytics&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>AMP page ping events will be sent as AMP-specific page ping events (rather than Javascript tracker page pings), against the <a href="https://github.com/snowplow/iglu-central/blob/master/schemas/dev.amp.snowplow/amp_page_ping/jsonschema/1-0-0" target="_blank" rel="noopener noreferrer">AMP page ping schema</a>, since the data available on AMP is defined differently to Javascript tracker page pings.  </p><p>All events are sent with an  <a href="https://github.com/snowplow/iglu-central/blob/master/schemas/dev.amp.snowplow/amp_web_page/jsonschema/1-0-0" target="_blank" rel="noopener noreferrer">AMP web page</a> context, for aggregation of pings by page view id.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-events">Custom events<a class="hash-link" href="#custom-events" title="Direct link to heading">​</a></h3><p>Custom events may be sent via the AMP tracker by passing the schema vendor, and version, and an escaped JSON of the desired data, as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;amp-analytics type=&quot;snowplow_v2&quot; id=&quot;event3&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;script type=&quot;application/json&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;collectorHost&quot;: &quot;snowplow-collector.acme.com&quot;,  // Replace with your collector host</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;appId&quot;: &quot;campaign-microsite&quot;                    // Replace with your app ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;triggers&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &quot;trackSelfDescribingEvent&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;on&quot;: &quot;click&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;selector&quot;: &quot;a&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;request&quot;: &quot;selfDescribingEvent&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      &quot;vars&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;customEventSchemaVendor&quot;: &quot;com.snowplowanalytics.snowplow&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;customEventSchemaName&quot;: &quot;link_click&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;customEventSchemaVersion&quot;: &quot;1-0-1&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &quot;customEventSchemaData&quot;: &quot;{\&quot;targetUrl\&quot;:\&quot;${targetUrl}\&quot;,\&quot;elementId\&quot;:\&quot;TEST\&quot;,\&quot;elementContent\&quot;:\&quot;${elementContent}\&quot;}&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/script&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/amp-analytics&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="analytics">Analytics<a class="hash-link" href="#analytics" title="Direct link to heading">​</a></h2><p>v2 of the tracker brings with it significant improvements in our ability to model and gain insights.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="standard-fields">Standard fields<a class="hash-link" href="#standard-fields" title="Direct link to heading">​</a></h3><p>All events sent via this tracker will have:</p><ul><li><code>v_tracker</code> set to <code>amp-1.0.0</code></li><li><code>platform</code> set to <code>web</code></li></ul><p>If you want to analyze events sent via this tracker, you may prefer to query for <code>v_tracker LIKE &#x27;amp-%&#x27;</code> to future-proof your query against future releases of this tracker (which may change the version number).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="page-view-and-ping-aggregation">Page view and ping aggregation<a class="hash-link" href="#page-view-and-ping-aggregation" title="Direct link to heading">​</a></h3><p>By default, the  <a href="https://github.com/snowplow/iglu-central/blob/master/schemas/dev.amp.snowplow/amp_web_page/jsonschema/1-0-0" target="_blank" rel="noopener noreferrer">AMP web page context</a> is attached to every event. This will contain the AMP-defined <a href="https://github.com/ampproject/amphtml/blob/master/spec/amp-var-substitutions.md#page-view-id-64" target="_blank" rel="noopener noreferrer">PAGE<!-- -->_<!-- -->VIEW<!-- -->_<!-- -->ID<!-- -->_<!-- -->64</a>, which defined as &quot;intended to be random with a high entropy and likely to be unique per URL, user and day&quot;.</p><p>Users can aggregate page views, page pings and other events on-page by this ID to aggregate engaged time, and model events to a page view level, by combining it with the url, amp client ID, and date.</p><p>Note that page pings and the page view ID itself are not defined by Snowplow&#x27;s logic, but by what&#x27;s made available by AMP - therefore applying the same logic to this data as that produced by the Javascript tracker is liable to produce different results.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="user-identification">User Identification<a class="hash-link" href="#user-identification" title="Direct link to heading">​</a></h3><p>By default, the  <a href="https://github.com/snowplow/iglu-central/blob/master/schemas/dev.amp.snowplow/amp_id/jsonschema/1-0-0" target="_blank" rel="noopener noreferrer">AMP ID</a> context is attached to every event. This contains the <a href="https://github.com/ampproject/amphtml/blob/master/spec/amp-var-substitutions.md#client-id" target="_blank" rel="noopener noreferrer">AMP Client ID</a>, the <code>user_id</code> (if set via the <code>userId</code> var), and the domain<!-- -->_<!-- -->userid (if passed to an AMP page via cross-domain linking - more detail below).</p><p>This provides a map between the main relevant identifiers, which can be used to model user journeys across platforms. Users can choose to instrument further user identification methods using custom contexts.</p><p>In order for the AMP Client ID to behave as expected, the &#x27;linker&#x27; parameter of the configuration JSON must have <code>&#x27;enabled&#x27;: true</code> set. Failing to do so can result in changing AMP client IDs, even where a user remains on AMP pages for the whole journey. (This can happen because AMP pages can be served from Google&#x27;s AMP cache).</p><p>The tracker is designed to handle user journeys as follows:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="js-tracker-page-to-amp-page">JS-tracker page to AMP page<a class="hash-link" href="#js-tracker-page-to-amp-page" title="Direct link to heading">​</a></h4><p>Where a user moves from a standard web page, tracked by the Javascript tracker, to an AMP page, the domain userid from the Javascript tracker can be passed to the AMP tracker by enabling the  <a href="https://github.com/snowplow/snowplow/wiki/1-General-parameters-for-the-Javascript-tracker#2217-configuring-cross-domain-tracking" target="_blank" rel="noopener noreferrer">Javascript tracker&#x27;s crossDomainLinker</a>. The AMP tracker will parse the value from the querystring, and attach it to all events, along with the AMP client ID, via the AMP ID context.</p><p>The AMP tracker uses a combination of cookies and the AMP linker to attempt to retain the value, however due to the nature of AMP pages, there is no guarantee that the value will be retained across sessions. To ensure best possible retention of the value within the session, make sure the tracker config has linker pages enabled for your AMP domains:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;linkers&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;enabled&quot;: true,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;proxyOnly&quot;: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;destinationDomains&quot;: [&quot;ampdomain&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Data models should be designed for an &#x27;at least once&#x27; identification structure - in other words, configuring the cross-domain linker correcttly will ensure at least one event contains both AMP ID and domain User ID. Models should aim to map this across all events. Of course, this method of identification depends on the user traveling directly from a JS-tracked page to an AMP page at least once.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="amp-page-to-js-tracker-page">AMP page to JS-tracker page<a class="hash-link" href="#amp-page-to-js-tracker-page" title="Direct link to heading">​</a></h4><p>Where a user moves frrom an AMP page to a standard web page which is tracked by the Javascript tracker, the AMP tracker will use AMP&#x27;s linker functionality to append the AMP CLient ID to the querystring, as long as linkers are enabled for the destination domain:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;linkers&quot;: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;enabled&quot;: true,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;proxyOnly&quot;: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  &quot;destinationDomains&quot;: [&quot;destDomain&quot;]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">},</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will add a querystring parameter &#x27;linker=&#x27; to the destination url, which contains the amp<!-- -->_<!-- -->id value, base-64 encoded. This will look something like this: <code>?sp_amp_linker=1*1c1wx43*amp_id*amp-a1b23cDEfGhIjkl4mnoPqr</code>.</p><p>The structure of this param is explained in the <a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/linker-id-receiving.md" target="_blank" rel="noopener noreferrer">AMP documentation</a> - models can extract the base64-encoded AMP Client ID, decode it, and map it to the domain userid (or any other user value) from the Javascript tracker.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="reporting-issues-and-contributing">Reporting Issues and Contributing<a class="hash-link" href="#reporting-issues-and-contributing" title="Direct link to heading">​</a></h2><p>A fork of the AMP project can be found in the <a href="https://github.com/snowplow-incubator/amphtml" target="_blank" rel="noopener noreferrer">Snowplow Incubator Github</a> Repo. Please submit issues, bugreports and PRs to this repo.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/snowplow/snowplow.github.io/tree/main/docs/collecting-data/collecting-from-own-applications/google-amp-tracker/google-amp-1-0-0-2/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-08-26T11:41:48.000Z">Aug 26, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/collecting-data/collecting-from-own-applications/google-amp-tracker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Google AMP Tracker</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/collecting-data/collecting-from-own-applications/google-amp-tracker/google-amp-1-0-0"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Google AMP (0.1.0)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#redshift-users" class="table-of-contents__link toc-highlight">Redshift Users</a></li></ul></li><li><a href="#standard-variables" class="table-of-contents__link toc-highlight">Standard variables</a><ul><li><a href="#collectorhost" class="table-of-contents__link toc-highlight"><code>collectorHost</code></a></li><li><a href="#appid" class="table-of-contents__link toc-highlight"><code>appId</code></a></li><li><a href="#userid" class="table-of-contents__link toc-highlight"><code>userId</code></a></li><li><a href="#nametracker" class="table-of-contents__link toc-highlight"><code>nameTracker</code></a></li><li><a href="#customcontexts" class="table-of-contents__link toc-highlight"><code>customContexts</code></a></li></ul></li><li><a href="#tracking-events" class="table-of-contents__link toc-highlight">Tracking events</a><ul><li><a href="#page-view" class="table-of-contents__link toc-highlight">Page view</a></li><li><a href="#structured-events" class="table-of-contents__link toc-highlight">Structured events</a></li><li><a href="#page-pings" class="table-of-contents__link toc-highlight">Page pings</a></li><li><a href="#custom-events" class="table-of-contents__link toc-highlight">Custom events</a></li></ul></li><li><a href="#analytics" class="table-of-contents__link toc-highlight">Analytics</a><ul><li><a href="#standard-fields" class="table-of-contents__link toc-highlight">Standard fields</a></li><li><a href="#page-view-and-ping-aggregation" class="table-of-contents__link toc-highlight">Page view and ping aggregation</a></li><li><a href="#user-identification" class="table-of-contents__link toc-highlight">User Identification</a></li></ul></li><li><a href="#reporting-issues-and-contributing" class="table-of-contents__link toc-highlight">Reporting Issues and Contributing</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Snowplow Analytics Ltd. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e6aef96b.js"></script>
<script src="/assets/js/main.957d7bc5.js"></script>
</body>
</html>